window['MCH.footerV2.time'] && window['MCH.footerV2.time'].push(new Date());
function $addToken(url,type,skey){var token=$getToken(skey);if(url==""||(url.indexOf("://")<0?location.href:url).indexOf("http")!=0){return url;}
if(url.indexOf("#")!=-1){var f1=url.match(/\?.+\#/);if(f1){var t=f1[0].split("#"),newPara=[t[0],"&g_tk=",token,"&g_ty=",type,"#",t[1]].join("");return url.replace(f1[0],newPara);}else{var t=url.split("#");return[t[0],"?g_tk=",token,"&g_ty=",type,"#",t[1]].join("");}}
return token==""?(url+(url.indexOf("?")!=-1?"&":"?")+"g_ty="+type):(url+(url.indexOf("?")!=-1?"&":"?")+"g_tk="+token+"&g_ty="+type);};var $ajax=(function(window,undefined){var oXHRCallbacks,xhrCounter=0;var fXHRAbortOnUnload=window.ActiveXObject?function(){for(var key in oXHRCallbacks){oXHRCallbacks[key](0,1);}}:false;return function(opt){var o={url:'',method:'GET',data:null,type:"text",async:true,cache:false,timeout:0,autoToken:true,username:'',password:'',beforeSend:$empty(),onSuccess:$empty(),onError:$empty(),onComplete:$empty()};for(var key in opt){o[key]=opt[key]}
var callback,timeoutTimer,xhrCallbackHandle,ajaxLocation,ajaxLocParts;try{ajaxLocation=location.href;}
catch(e){ajaxLocation=document.createElement("a");ajaxLocation.href="";ajaxLocation=ajaxLocation.href;}
ajaxLocParts=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/.exec(ajaxLocation.toLowerCase())||[];o.isLocal=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(ajaxLocParts[1]);o.method=(typeof(o.method)!="string"||o.method.toUpperCase()!="POST")?"GET":"POST";o.data=(typeof o.data=="string")?o.data:$makeUrl(o.data);if(o.method=='GET'&&o.data){o.url+=(o.url.indexOf("?")<0?"?":"&")+o.data;}
if(o.autoToken){o.url=$addToken(o.url,"ajax");}
o.xhr=$xhrMaker();if(o.xhr===null){return false;}
try{if(o.username){o.xhr.open(o.method,o.url,o.async,o.username,o.password);}
else{o.xhr.open(o.method,o.url,o.async);}}
catch(e){o.onError(-2,e);return false;}
if(o.method=='POST'){o.xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded');}
if(!o.cache){o.xhr.setRequestHeader('If-Modified-Since','Thu, 1 Jan 1970 00:00:00 GMT');o.xhr.setRequestHeader('Cache-Control','no-cache');}
o.beforeSend(o.xhr);if(o.async&&o.timeout>0){if(o.xhr.timeout===undefined){timeoutTimer=setTimeout(function(){if(o.xhr&&callback){callback(0,1);}
o.onError(0,null,'timeout');},o.timeout);}
else{o.xhr.timeout=o.timeout;o.xhr.ontimeout=function(){if(o.xhr&&callback){callback(0,1);}
o.onError(0,null,'timeout');};}}
o.xhr.send(o.method=='POST'?o.data:null);callback=function(e,isAbort){if(timeoutTimer){clearTimeout(timeoutTimer);timeoutTimer=undefined;}
if(callback&&(isAbort||o.xhr.readyState===4)){callback=undefined;if(xhrCallbackHandle){o.xhr.onreadystatechange=$empty();if(fXHRAbortOnUnload){try{delete oXHRCallbacks[xhrCallbackHandle];}
catch(e){}}}
if(isAbort){if(o.xhr.readyState!==4){o.xhr.abort();}}
else{var status,statusText,responses;responses={headers:o.xhr.getAllResponseHeaders()};status=o.xhr.status;try{statusText=o.xhr.statusText;}
catch(e){statusText="";}
try{responses.text=o.xhr.responseText;}
catch(e){responses.text="";}
if(!status&&o.isLocal){status=responses.text?200:404;}
else if(status===1223){status=204;}
if(status>=200&&status<300){responses.text=responses.text.replace(/<!--\[if !IE\]>[\w\|]+<!\[endif\]-->/g,'');switch(o.type){case'text':o.onSuccess(responses.text);break;case"json":var json;try{json=(new Function("return ("+responses.text+")"))();}
catch(e){o.onError(status,e,responses.text);}
if(json){o.onSuccess(json);}
break;case"xml":o.onSuccess(o.xhr.responseXML);break;}}
else{if(status===0&&o.timeout>0){o.onError(status,null,'timeout');}
else{o.onError(status,null,statusText);}}
o.onComplete(status,statusText,responses);}
delete o.xhr;}};if(!o.async){callback();}
else if(o.xhr.readyState===4){setTimeout(callback,0);}
else{xhrCallbackHandle=++xhrCounter;if(fXHRAbortOnUnload){if(!oXHRCallbacks){oXHRCallbacks={};if(window.attachEvent){window.attachEvent("onunload",fXHRAbortOnUnload);}
else{window["onunload"]=fXHRAbortOnUnload;}}
oXHRCallbacks[xhrCallbackHandle]=callback;}
o.xhr.onreadystatechange=callback;}};})(window,undefined);function $empty(){return function(){return true;}};function $getCookie(name){var reg=new RegExp("(^| )"+name+"(?:=([^;]*))?(;|$)"),val=document.cookie.match(reg);return val?(val[2]?unescape(val[2]):""):null;};function $getToken(skey){var skey=skey?skey:$getCookie("skey");return skey?$time33(skey):"";};function $makeUrl(data){var arr=[];for(var k in data){arr.push(k+"="+data[k]);};return arr.join("&");};function $namespace(name){for(var arr=name.split(','),r=0,len=arr.length;r<len;r++){for(var i=0,k,name=arr[r].split('.'),parent={};k=name[i];i++){i===0?eval('(typeof '+k+')==="undefined"?('+k+'={}):"";parent='+k):(parent=parent[k]=parent[k]||{});}}};function $time33(str){for(var i=0,len=str.length,hash=5381;i<len;++i){hash+=(hash<<5)+str.charAt(i).charCodeAt();};return hash&0x7fffffff;};function $xhrMaker(){var xhr;try{xhr=new XMLHttpRequest();}catch(e){try{xhr=new ActiveXObject("Msxml2.XMLHTTP");}catch(e){try{xhr=new ActiveXObject("Microsoft.XMLHTTP");}catch(e){xhr=null;}}};return xhr;};$namespace("MCH.footer");MCH.footer={searchChildMerchantTimer:'',searchChildMerchantName:'',protocolDG:'',protocolCbx:'',protocolBtn:'',suppProtocolDG:'',suppProtocolBtn:'',finishProtocolDG:''};MCH.footerQrcodeTimers=null;MCH.footerQrcodeTimeout=null;MCH.footer.init=function(){footerThat=this;footerThat.bind();footerThat.changeVerify();MCH.footer.protocolDG=Common.getPop('MchProtocolDG');MCH.footer.protocolBtn=$('#MchProtocolBn');MCH.footer.protocolCbx=Common.getCbx({id:'MchProtocolCbx',onCheck:function(){MCH.footer.protocolBtn.removeClass('btn-default').addClass('btn-primary');},onUnCheck:function(){MCH.footer.protocolBtn.removeClass('btn-primary').addClass('btn-default');}});MCH.footer.suppProtocolDG=$('#SuppProtocolDG');MCH.footer.suppProtocolBtn=$('#SuppProtocolBn');MCH.footer.finishProtocolDG=$('#FinishProtocolDG');MCH.footer.finishProtocolBtn=$('#FinishProtocolBn');var ret=MCH.footer.checkSignProtocol();if(ret){MCH.footer.check_sign_suppprotocol();}
MCH.footer.initPageHelp();};MCH.footer.bind=function(){footerThat.bindChangeCheckimg();$('#MchProtocolBn').on('click',function(){if(MCH.footer.protocolCbx.isCheck()){var postData=Common.getCrsfToken();var ret=false;$ajax({url:'/index.php/core/merchant/sign_mch_protocol',data:postData,method:'post',type:'json',async:false,onSuccess:function(data){MCH.header.handleAjax(data);if(data.errorcode!=0){ret=false;}else{ret=true;}},onError:function(msg){ret=false;}});if(!ret){MCH.header.showErrorAlertDialog('操作失败,请稍后重试');}else{MCH.footer.protocolDG.close();MCH.footer.check_sign_suppprotocol();}}});$('#SuppProtocolBn').on('click',function(){var postData=Common.getCrsfToken();var ret=false;$ajax({url:'/index.php/core/merchant/sign_suppProtocol',data:postData,method:'post',type:'json',async:false,onSuccess:function(data){MCH.header.handleAjax(data);if(data.errorcode!=0){ret=false;}else{ret=true;}},onError:function(msg){ret=false;}});if(!ret){MCH.header.showErrorAlertDialog('操作失败,请稍后重试');}else{MCH.footer.suppProtocolDG.addClass('hide');MCH.footer.finishProtocolDG.removeClass('hide');}});$('#FinishProtocolBn').on('click',function(){MCH.footer.finishProtocolDG.addClass('hide');});};MCH.footer.changeVerify=function(){if($(".img-verify").size()>0){$(".img-verify").attr("src","https://ssl.captcha.qq.com/getimage?aid=755049101&rd="+Math.random());}};MCH.footer.bindChangeCheckimg=function(){$(".change-verify").on('click',function(){footerThat.changeVerify();});};MCH.footer.searchChildMerchant=function(params){var obj=params['obj'];var value=obj.val();if(value!=MCH.footer.searchChildMerchantName){return false;}
var merchants={};var curpage=params['curpage'];var total_page=1;var isAppend=params['isAppend'];var list=obj.parent().parent().children('ul.dropdown-list');if(!isAppend){list.children().remove();}
var token_name=$("#token").attr("name");var hash=$("#token").val();var post_data=token_name+'='+hash+'&merchant_name='+value+'&page_num='+curpage;$ajax({url:'/index.php/extend/child_merchant/query_merchant_by_name',data:post_data,method:'post',type:'json',async:true,onSuccess:function(data){if(data.errorcode==0){merchants=data.data.list;curpage=data.data.curpage;total_page=data.data.total_page;for(var key in merchants){var model='<li><a href="#" data-target="'+key+'">'+merchants[key]+'</a></li>';list.append(model);}
if(curpage<total_page){var nextPage=parseInt(curpage,10)+1;var model='<dl class="jsDropDownLiMerchantMore"><a href="#" data-target="'+nextPage+'">获取更多子商户</a></dl>';list.append(model);}}},onError:function(msg){}});};MCH.footer.checkSignProtocol=function(){var whiteUrl=['/index.php/core/home','/index.php/core/apply_progress','/index.php/core/apply_bank','/index.php/core/apply_sign','/index.php/core/merchantupgrading','/index.php/core/submerchant/create_sub_merchant','/index.php/core/applyment','/index.php/core/applymentnew','/index.php/extend/product/lists','/index.php/public/product/detail','/index.php/public/cms/content_list','/index.php/public/cms/content_detail','/index.php/extend/cms/inner_message_list','/index.php/extend/spark_plan','/index.php/apply/applyment_home/guide_normal'];var localtion=window.location.pathname;prefix='/index.php';if(localtion.substr(0,prefix.length)!=prefix){localtion=prefix+localtion;}
for(var i=0;i<whiteUrl.length;i++){if(localtion.substr(0,whiteUrl[i].length)==whiteUrl[i]){return;}}
var postData=Common.getCrsfToken();var isSigned=false;$ajax({url:'/index.php/public/merchant/check_sign_protocol',data:postData,method:'post',type:'json',async:false,onSuccess:function(data){MCH.header.handleAjax(data);if(data.errorcode!=0){MCH.footer.protocolDG.open();}
else{isSigned=true;}},onError:function(msg){}});return isSigned;};MCH.footer.check_sign_suppprotocol=function(){var whiteUrl=['/index.php/core/home','/index.php/core/apply_progress','/index.php/core/apply_bank','/index.php/core/apply_sign','/index.php/core/merchantupgrading','/index.php/core/submerchant/create_sub_merchant','/index.php/core/applyment','/index.php/core/applymentnew','/index.php/extend/product/lists','/index.php/public/product/detail','/index.php/public/cms/content_list','/index.php/public/cms/content_detail','/index.php/extend/cms/inner_message_list','/index.php/extend/spark_plan','/index.php/apply/applyment_home/guide_normal'];var localtion=window.location.pathname;prefix='/index.php';if(localtion.substr(0,prefix.length)!=prefix){localtion=prefix+localtion;}
for(var i=0;i<whiteUrl.length;i++){if(localtion.substr(0,whiteUrl[i].length)==whiteUrl[i]){return;}}
var postData=Common.getCrsfToken();$ajax({url:'/index.php/public/merchant/check_sign_suppprotocol',data:postData,method:'post',type:'json',async:true,onSuccess:function(data){MCH.header.handleAjax(data);if(data.errorcode==0){MCH.footer.suppProtocolDG.removeClass('hide');}},onError:function(msg){}});};MCH.footer.initPageHelp=function(){var gen=function(){var tpl_login=['<div class="pendant"><div class="wrap"><div class="mobile-data" id="idMobileData" title="移动版商户平台"> <i class="ico-miniapp"></i><i class="ico-feed hide">●</i><div class="popup pop-right pos-top hide"> <div class="inner"> <img class="qrc" src="https://wx.gtimg.com/mch/img/qrc_miniapp.jpg" alt=""> <p class="des">微信扫码，手机端经营管理</p> </div> <i class="arrow arrow-out"></i> <i class="arrow arrow-in"></i> </div> </div><div class="gain-act" id="downloadIconWrap" title="预约下载中心">'+'<i class="ico-down"></i><i class="ico-feed hide" id="pendant_newmag">●</i>'+'<div class="popup pop-right pos-top hide" id="pendant_creattexttip"><div class="inner">数据报表生成中，请稍后点此下载</div>'+'<i class="arrow arrow-out"></i><i class="arrow arrow-in"></i></div></div>'+'<div class="feed-back feedback_edit" title="我要反馈"><a class="feed-edit" href="javascript:;"><i class="ico-edit"></i></a></div><div class="help-faq" id="scene-faq"><div class="faq-foucs">获取帮助</div>','<div class="faq-panel clr hide"><div class="panel-main"><div class="main-hd">热门问题</div><div class="main-bd"><ul>{#list#}</ul></div>','<div class="main-ft"><a href="{#more#}" target="_blank">查看更多</a></div></div>','<div class="panel-side"><div class="side-tel hide"><p class="num">95017</p><p class="des">周一至周五 09:00-18:00</p></div>','<div class="side-wxg"><div class="scan-qrcode"><div class="qrcode-img"><img class="qrcode-img-view" alt="" style="display:none;"/>','<div class="alt" style="display:none;"><div class="with-loading" style="padding:50px 0"><i class="loading"></i></div>','</div></div><div class="qrcode-msg">扫描二维码加入群聊<br>及时接收平台通知</div></div></div>','<div class="side-web"><a href="http://kf.qq.com/faq/180907eqMbAj180907fm6BNz.html" target="_blank">在线客服</a></div></div></div></div></div></div>',];var tpl_logout=['<div class="pendant"><div class="wrap"><div class="mobile-data" id="idMobileData" title="移动版商户平台"> <i class="ico-miniapp"></i><i class="ico-feed hide">●</i><div class="popup pop-right pos-top hide"> <div class="inner"> <img class="qrc" src="https://wx.gtimg.com/mch/img/qrc_miniapp.jpg" alt=""> <p class="des">微信扫码，手机端经营管理</p> </div> <i class="arrow arrow-out"></i> <i class="arrow arrow-in"></i> </div> </div> <div class="gain-act" id="downloadIconWrap" title="预约下载中心">'+'<i class="ico-down"></i><i class="ico-feed hide" id="pendant_newmag">●</i>'+'<div class="popup pop-right pos-top hide" id="pendant_creattexttip"><div class="inner">数据报表生成中，请稍后点此下载</div>'+'<i class="arrow arrow-out"></i><i class="arrow arrow-in"></i></div></div>'+'<div class="feed-back feedback_edit" title="我要反馈"><a class="feed-edit" href="javascript:;"><i class="ico-edit"></i></a></div><div class="help-faq" id="scene-faq"><div class="faq-foucs">获取帮助</div>','<div class="faq-panel clr hide"><div class="panel-main"><div class="main-hd">热门问题</div><div class="main-bd"><ul>{#list#}</ul></div>','<div class="main-ft"><a href="{#more#}" target="_blank">查看更多</a></div></div>','<div class="panel-side"><div class="side-tel hide"><p class="num">95017</p><p class="des">周一至周五 09:00-18:00</p></div>','<div class="side-wxg"><div class="scan-qrcode"><div class="qrcode-img"><img class="qrcode-img-view" src="" alt="" style="display:none;"/>','<div class="alt" style="display:none;"><div class="with-loading" style="padding:50px 0"><i class="loading"></i></div>','</div></div><div class="qrcode-msg">扫描二维码加入群聊<br>及时接收平台通知</div></div></div>','<div class="side-web"><a href="http://kf.qq.com/faq/180907eqMbAj180907fm6BNz.html" target="_blank">在线客服</a></div></div></div></div></div></div>',];var tpl="";tpl=tpl_login.join("");var s='<li><a href="{#url#}" target="_blank">{#title#}</a></li>';var postData={url:encodeURIComponent(top.location.href.replace(/\?.*/g,"")),};$ajax({url:"/index.php/public/cms/get_page_help_content",data:postData,method:"get",type:"json",onSuccess:function(data){if(data.errorcode==0){var content=data.data.content;var len=content.list.length;var list=content.list;var more=content.more;if(len==0||!more){return;}
var html=[];for(var i=0,l=len;i<l;i++){html.push(s.replace(/{#url#}/,list[i].url).replace(/{#title#}/,list[i].title));}
var h=tpl.replace(/{#list#}/,html.join("")).replace(/{#more#}/,more)
$("body").append(h);var faqPanel=$("#scene-faq .faq-panel");$("#scene-faq").mouseenter(function(){faqPanel.removeClass("hide");$('.pendant .qrcode-img .alt').show()
MCH.footerQrcodeTimers&&clearInterval(MCH.footerQrcodeTimers)
MCH.footerQrcodeTimeout&&clearTimeout(MCH.footerQrcodeTimeout)
MCH.footer.replaceQetQrcode()
MCH.footerQrcodeTimers=setInterval("MCH.footer.replaceQetQrcode()",3000);MCH.footerQrcodeTimeout=setTimeout(function(){clearInterval(MCH.footerQrcodeTimers)},60000);}).mouseleave(function(){faqPanel.addClass("hide");});$("#idMobileData").mouseenter(function(){$(this).children(".popup").removeClass("hide");}).mouseleave(function(){$(this).children(".popup").addClass("hide");});setTimeout(function(){$.getScript("https://wx.gtimg.com/outwxgtimg/js/mch.ordercenter.build.js",function(){MCH.ordercenter.createDownloadIcon();});},1000);MCH.footer.cloudTuCao();}},});};gen();};MCH.footer.replaceQetQrcode=function(){$ajax({url:"/index.php/extend/chatroom/get_qrcode_url",method:"get",type:"json",onSuccess:function(data){if(Number(data.errorcode)===0){var url=decodeURIComponent(data.data||'')
if(url.indexOf('wework.qpic.cn')===-1){url='https://pay.weixin.qq.com/index.php/public/chatroom/url_to_qrcode?url='+url}
if(data.data){clearInterval(MCH.footerQrcodeTimers)
$('.pendant .wrap .side-wxg .qrcode-img-view').attr("src",url);$('.pendant .wrap .side-wxg .qrcode-img-view').show()
$('.pendant .wrap .side-wxg .qrcode-img .alt').remove()}}},onError:function(msg){$('.pendant .wrap .side-wxg .qrcode-img-view').hide()
$('.pendant .wrap .side-wxg .qrcode-img .alt').show()
errmsg='操作失败';errcode=-1;}});}
MCH.footer.getQueryString=function(name){var reg=new RegExp('(^|&)'+name+'=([^&]*)(&|$)','i');var r=window.location.search.substr(1).match(reg);if(r!=null){return unescape(r[2]);}
return null;};MCH.footer.getCookie=function(name)
{var arr,reg=new RegExp("(^| )"+name+"=([^;]*)(;|$)");if(arr=document.cookie.match(reg))
return unescape(arr[2]);else
return null;};MCH.footer.cloudTuCao=function(){$('.feedback_edit').off("click").on("click",function(){var mchInfo=null;var merchant_code=MCH.footer.getCookie("merchant_code");var login_id=MCH.footer.getCookie("login_id");if(merchant_code!=null){mchInfo="商户号"+merchant_code.toString()+";员工账号"+login_id.toString()+"@"+merchant_code.toString();}else{mchInfo="申请单编号"+MCH.footer.getQueryString("merchantId");}
var jsonInfo="clientInfo="+navigator.appName+"&clientVersion="+navigator.appVersion+"&os="+navigator.platform+"&customInfo="+mchInfo;var obj=window.open("https://support.qq.com/products/4248?"+jsonInfo);});};MCH.footer.init();
window['MCH.footerV2']='22337:20211230:20211230163026';
window['MCH.footerV2.time'] && window['MCH.footerV2.time'].push(new Date());/*  |xGv00|3caa1f48c35ba03672c481feea6d0f8e */