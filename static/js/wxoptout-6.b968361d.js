(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{496:function(e,t,n){"use strict";n.r(t);n(111),n(117),n(118);var a=n(0),o=n.n(a),r=n(51),i=n.n(r),c=n(44),l=n.n(c),s=n(72),u=n.n(s),d=n(71),f=n.n(d),g=n(14),h=n.n(g),m=n(2),p=n(13),E=n(15),v=n(22),w=n(19);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,o,r=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(r.push(a.value),!t||r.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var O=function(e){var t=e.optoutConfigs,n=e.hasLogin,r=e.showNotLoginDialog,i=e.showErrMsgDialog,c=e.changeOptoutConfigs,l=e.wrapperClassName,s=e.size,d=e.pending,g=e.word,y=e.online,O=b(Object(a.useState)({checked:!0}),2),S=O[0],C=O[1];return Object(a.useEffect)((function(){if(t&&t.length){var e=t[0];void 0!==e&&(console.log("optoutConfig not undefined"),C({checked:"false"!==e.checked&&!1!==e.checked}))}}),[t]),o.a.createElement("div",{className:l||""},d&&o.a.createElement("div",{className:"loading"},o.a.createElement(f.a,null)),!d&&o.a.createElement("div",null,o.a.createElement("span",{className:"spaui-switch-status"},S.checked?g?E.a[g].part1.buttonOpen:"":o.a.createElement("span",{className:"status-error"},g?E.a[g].part1.buttonClose:"")),o.a.createElement(u.a,{checked:S.checked,onChange:function(e,t){if(!n)return console.log("nologin"),void r();!function(e,t){var n=Object(w.a)("media_source");if(C({checked:t}),localStorage.setItem("".concat(n,"_localSwitch"),!1===t?"false":"true"),y){var a=window.location.href.split("?"),o=a&&a[1]&&a[1].split("&");h()(Object(p.a)("optout/add_t?")+(o||[]).filter(Boolean).map((function(e){for(var t,n=e.indexOf("="),a=n>=0?e.substring(0,n):e,o=n>=0?e.substring(e.indexOf("=")+1):"",r=["%3D%3D","%3D","==","="],i=0;i<r.length;i++)if(o&&o.endsWith(r[i])){t=r[i];break}return a+"="+(t?o.substring(0,o.lastIndexOf(t)):o)})).join("&")+"&operateType="+(t?"1":"0"),{method:"GET",withCredentials:!0}).then((function(e){return e.status>=m.a.CODE.serverError&&i(m.a.SERVER_ERROR_MSG),e.data})).then((function(e){if(e&&e.code&&e.code!==m.a.CODE.uniformError){if(e.code===m.a.CODE.genericError)i(e.message);else if(e.code===m.a.CODE.noLogin)r();else if(e.code===m.a.CODE.ok&&e.data){c(void 0);var t="false"!==e.data.checked&&!1!==e.data.checked;Object(v.a)("wxoptout.check:".concat(t))}}else i(m.a.SERVER_ERROR_MSG)})).catch((function(e){i("服务异常，请稍后重试")}))}}(0,t)},size:s})))},S=n(73);function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,o,r=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(r.push(a.value),!t||r.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return D(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var L=function(e){var t=e.optoutConfigs,n=e.hasLogin,a=e.showNotLoginDialog,r=e.showErrMsgDialog,i=e.changeOptoutConfigs,c=e.pending,l=e.word,s=e.online,u=C(Object(p.b)({isSettingOpen:!1,showActionConfirm:!1}),2),d=u[0],f=u[1];return o.a.createElement("div",{className:"card setting",id:"setting"},o.a.createElement("div",{className:"card-title titlebar titlebar-full",id:"fold"},o.a.createElement("h3",{className:"title"},l?E.a[l].part1.title:""),o.a.createElement("a",{className:"title-addons card-action",href:"#"},o.a.createElement("i",{className:"icon-arr"}))),o.a.createElement("div",{className:"card-body"},o.a.createElement("div",{className:"setting-item"},o.a.createElement("div",{className:"titlebar titlebar-full"},o.a.createElement("h4",{className:"title"},l?E.a[l].part1.buttonTitle:""),o.a.createElement(O,{size:"large",wrapperClassName:"title-addons",optoutConfigs:t,hasLogin:n,showNotLoginDialog:a,showErrMsgDialog:r,changeOptoutConfigs:i,pending:c,word:l,online:s}))),o.a.createElement("div",{className:"setting-item",style:{paddingTop:"0px"}},o.a.createElement("p",null,l?E.a[l].part2.fst:"",o.a.createElement("strong",{style:{fontWeight:"bold"}},l?E.a[l].part2.sec:"")))),o.a.createElement("div",{id:"confirmDialog"},o.a.createElement(S.a,{show:d.showActionConfirm,onConfirm:function(){f({showActionConfirm:!1})},onCancel:function(){f({showActionConfirm:!1})}})))},N=n(74),_=n(75),k=n(76),R=n(77),A=n(78),I=(n(498),n(507),n(90));function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var a,o,r=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(a=n.next()).done)&&(r.push(a.value),!t||r.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var W=function(){var e,t=M(Object(I.useComposite)({hasLogin:!1,isShowNotLoginDialog:!1,errMsg:void 0,checked:!0,nickname:void 0,figureUrl:void 0,optoutConfigs:void 0,isShowRefererWarning:!1,isAboutOpen:!1,isIntroductionOpen:!1,tipModal:{show:!1,time:m.a.DIALOG_DISSMISS_TIME},isShowBottomLogin:!1,isShowWechatAuth:!1,hasLogout:!1,showWxLogoutDialog:!1,pending:!1,online:!0}),2),n=t[0],r=t[1],i=M(Object(a.useState)(!1),2),c=i[0],s=i[1],u=["zh_TW","zh_tw","zh_HK","zh_hk","en","zh_CN","zh_cn"];function d(e){var t=e.type,n=Object(w.a)("media_source"),a=localStorage.getItem("".concat(n,"_localSwitch")),o=localStorage.getItem("".concat(n,"_serverSwitch"));if("offline"===t)r({online:!1});else if("online"===t&&a!==o){var i=window.location.href.split("?"),c=i&&i[1]&&i[1].split("&");h()(Object(p.a)("optout/add_t?")+(c||[]).filter(Boolean).map((function(e){for(var t,n=e.indexOf("="),a=n>=0?e.substring(0,n):e,o=n>=0?e.substring(e.indexOf("=")+1):"",r=["%3D%3D","%3D","==","="],i=0;i<r.length;i++)if(o&&o.endsWith(r[i])){t=r[i];break}return a+"="+(t?o.substring(0,o.lastIndexOf(t)):o)})).join("&")+"&operateType="+("true"===localStorage.getItem("".concat(n,"_localSwitch"))?"1":"0"),{method:"GET",withCredentials:!0}).then((function(e){return e.status>=m.a.CODE.serverError&&x(m.a.SERVER_ERROR_MSG),e.data})).then((function(e){if(e&&e.code&&e.code!==m.a.CODE.uniformError){if(e.code===m.a.CODE.genericError)x(e.message);else if(e.code===m.a.CODE.noLogin)j();else if(e.code===m.a.CODE.ok&&e.data){var t="true"===e.data.checked||!0===e.data.checked;console.log("checkedValue:"+t),localStorage.setItem("".concat(n,"_serverSwitch"),!1===t?"false":"true")}}else x(m.a.SERVER_ERROR_MSG)})).catch((function(e){x("服务异常，请稍后重试")})),Object(v.a)("resend_wx_".concat(o,"_").concat(a))}}function f(){window.WeixinJSBridge.invoke("setNavigationBarButtons",{right:{hidden:!0}},(function(e){console.info("res:"+JSON.stringify(e))}))}function g(){var e;return"micromessenger"==(null===(e=navigator.userAgent.toLowerCase().match(/MicroMessenger/i))||void 0===e?void 0:e[0])}function b(e){return(!e||e.status>m.a.CODE.serverError)&&(e.status==m.a.CODE.badGateway?x(m.a.BAD_GATEWAY_MSG):x(m.a.SERVER_ERROR_MSG)),e.data}function y(e,t,n){e&&e.code&&e.code!=m.a.CODE.uniformError?e.code==m.a.CODE.genericError?x(e.message):e.code==m.a.CODE.redirect&&e.data?window.location.href=e.data:e.code==m.a.CODE.forbiddenReferer?r({isShowRefererWarning:!0}):t?t():n&&n():x(m.a.SERVER_ERROR_MSG)}function O(){var e=window.location.href.split("?");return(e&&e[1]&&e[1].split("&")||[]).filter(Boolean).map((function(e){for(var t,n=e.indexOf("="),a=n>=0?e.substring(0,n):e,o=n>=0?e.substring(e.indexOf("=")+1):"",r=["%3D%3D","%3D","==","="],i=0;i<r.length;i++)if(o&&o.endsWith(r[i])){t=r[i];break}return a+"="+(t?o.substring(0,o.lastIndexOf(t)):o)})).join("&")}function S(e){console.log("will login with:"+e),h()(Object(p.a)("optout/login?")+O()+"&adType=1&openIdType="+e,{method:"GET",withCredentials:!0}).then((function(e){return b(e)})).then((function(e){y(e,null,(function(){e.code===m.a.CODE.ok&&e.data&&(r({hasLogin:!0,nickname:e.data.nickname,figureUrl:e.data.figureUrl,pending:!1}),C())}))})).catch((function(e){console.info(e),r({pending:!1})}))}function C(){r({pending:!0}),h()(Object(p.a)("optout/list_t?")+O(),{method:"GET",withCredentials:!0}).then((function(e){return b(e)})).then((function(e){y(e,null,(function(){if(console.info(JSON.stringify(e)),e.code===m.a.CODE.ok&&(e.data||e.nickname)){var t=!e.data||!e.data.length||"false"!==e.data[0].checked&&!1!==e.data[0].checked;r({hasLogin:!0,optoutConfigs:e.data,nickname:e.nickname,figureUrl:e.figureUrl||"https://thirdwx.qlogo.cn/mmopen/vi_32/Q3auHgzwzM5gy3e1ap4W3gibGFvevsflhIsyopGibmJxbH5VFBbMqM8zEOzicZbBq6679Jh3RmOL5eYVfEgahLwkQ/132",pending:!1});var n=Object(w.a)("media_source");localStorage.setItem("".concat(n,"_localSwitch"),!1===t?"false":"true"),localStorage.setItem("".concat(n,"_serverSwitch"),!1===t?"false":"true")}else e.code===m.a.CODE.noLogin&&function(){var e=document.referrer;if(console.log("check document referrer:",e),!!e)return/http(s?)\:\/\/[\w\.]*\.qq\.com/i.exec(e)||/http(s?)\:\/\/[\w\.]*\.tencent\.com/i.exec(e)}()}))})).catch((function(e){console.info(e),e.response&&e.response.data&&e.response.data.code===m.a.CODE.noLogin?(console.info("未登录"),S("WeChat")):r({pending:!1})}))}function D(){r({isShowBottomLogin:!1})}function j(){g()?r({hasLogout:!1}):r({isShowNotLoginDialog:!0})}function W(e){r({optoutConfigs:e})}function x(e,t){(function(e){var t=l.a.assign({},e.tipModal,e);r({tipModal:t})})({show:!0,time:t=t||m.a.DIALOG_DISSMISS_TIME,errMsg:e}),function(e){l.a.delay((function(){r({tipModal:{show:!1,time:0,errMsg:""}})}),e)}(t)}return Object(a.useEffect)((function(){var e=Object(w.a)("media_source");Object(v.a)("media_source:".concat(e)),void 0===window.WeixinJSBridge?document.addEventListener&&document.addEventListener("WeixinJSBridgeReady",f,!1):f();var t=function(){var e,t=navigator.userAgent.toLowerCase();if("language"==(null===(e=t.match(/Language/i))||void 0===e?void 0:e[0])){var n,a=null===(n=t.split(" ").find((function(e){return e.indexOf("language")>=0})))||void 0===n?void 0:n.split("/");return a&&null!=a&&a.length?a[a.length-1]:void 0}return}();console.log(t),t?u.includes(t)||(t="en"):t="zh_CN",r({word:t}),document.title=E.a[t].title,s(("BackCompat"==document.compatMode?{width:document.body.clientWidth,height:document.body.clientHeight}:{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}).width>m.a.MIN_LARGE_SCREEN_WIDTH),function(){var e=window.location.href.split("?"),t=e&&e[1]&&e[1].split("=");if(t&&t[1]&&(t[1].endsWith("#")&&(t[1]=t[1].substring(0,t.length-1)),t[1]==encodeURIComponent("登录失败")))return x("登录失败"),!0;return!1}()||C();var n=document.querySelectorAll("#fold");if([].map.call(n,(function(e){e.addEventListener("click",(function(e){e.target.parentNode.parentNode.classList.toggle("fold"),e.preventDefault()}))})),!c){document.addEventListener("click",D);var a=document.getElementsByClassName("spaui-switch-checked");if(a&&a.length)for(var o=0;o<a.length;o++)a[o].classList.remove("size-lg")}return window.addEventListener("offline",d),window.addEventListener("online",d),function(){window.removeEventListener("offline",d),window.removeEventListener("online",d)}}),[]),o.a.createElement("div",null,o.a.createElement("div",{className:"wrapper",style:{marginTop:"-80px"}},o.a.createElement("div",{className:"main"},o.a.createElement(L,{optoutConfigs:n.optoutConfigs,hasLogin:n.hasLogin,showNotLoginDialog:j,showErrMsgDialog:x,changeOptoutConfigs:W,pending:n.pending,word:n.word,online:n.online}),(e=n.word,o.a.createElement("div",{className:"card"},o.a.createElement("div",{className:"card-title titlebar titlebar-full",id:"fold"},o.a.createElement("h3",{className:"title"},e?E.a[e].part3.title:""),o.a.createElement("a",{className:"title-addons card-action"},o.a.createElement("i",{className:"icon-arr"}))),o.a.createElement("div",{className:"card-body"},o.a.createElement("p",null,e?E.a[e].part3.fst:"")))),function(){var e=n.word;return o.a.createElement("div",{className:"card fold"},o.a.createElement("div",{className:"card-title titlebar titlebar-full",id:"fold"},o.a.createElement("h3",{className:"title"},e?E.a[e].part4.title:""),o.a.createElement("a",{className:"title-addons card-action"},o.a.createElement("i",{className:"icon-arr"}))),o.a.createElement("div",{className:"card-body"},o.a.createElement("p",null,e?E.a[e].part4.fst:""),o.a.createElement("p",null,e?E.a[e].part4.sec:""),o.a.createElement("p",null,e?E.a[e].part4.thd:"",o.a.createElement("a",{href:"https://privacy.qq.com/",target:"_blank"},e?E.a[e].part4.link:""),e?E.a[e].part4.four:"")))}()),o.a.createElement("footer",{className:"footer"},"Copyright © 1998 - ",(new Date).getFullYear()," Tencent Inc. All Rights Reserved. 腾讯公司 版权所有")),o.a.createElement("div",{id:"dialog1"},o.a.createElement(N.a,{isShowNotLoginDialog:n.isShowNotLoginDialog,dismissNotLoginDialog:function(){r({isShowNotLoginDialog:!1})}})),o.a.createElement("div",{id:"dialog2"},o.a.createElement(_.a,{tipModal:n.tipModal})),o.a.createElement("div",{id:"dialog3"},o.a.createElement(k.a,{isShowRefererWarning:n.isShowRefererWarning,dismissRefererWarning:function(){r({isShowRefererWarning:!1})}})),o.a.createElement("div",{id:"wechatAuthDialog"},o.a.createElement(R.a,{show:g()&&!n.hasLogin&&n.isShowWechatAuth&&!n.hasLogout,onClose:function(){r({isShowWechatAuth:!1})},onConfirm:function(){return S("WeChat")}})),o.a.createElement("div",{id:"wechatLogoutDialog"},o.a.createElement(A.a,{show:n.showWxLogoutDialog,onClose:function(){return r({showWxLogoutDialog:!1})},onConfirm:function(){h()(Object(p.a)("optout/logOut"),{method:"GET",withCredentials:!0}).then((function(e){return b(e)})).then((function(e){y(e,null,(function(){e.code===m.a.CODE.ok&&r({hasLogout:!0,showWxLogoutDialog:!1,hasLogin:!1,nickname:void 0,figureUrl:void 0,optoutConfigs:void 0})}))})).catch((function(e){console.info(e)}))}})))};i.a.render(o.a.createElement(W,null),document.getElementById("page"))}},[[496,1,2,0]]]);