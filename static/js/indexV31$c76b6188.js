var OfficialIndex={init:function(){var e=window.navigator.userAgent;this.isMobile=e.match(/Android/i)||-1!=e.indexOf("iPhone")||-1!=e.indexOf("iPod")||-1!=e.indexOf("iPad"),this.isSafari=-1!=e.indexOf("Safari")&&-1==e.indexOf("Chrome"),this.bindScrollEvents(),this.initBannerVideo2(),this.pageSpeedReport(),this.initWxContactSection(),this.initCollaborationSection(),this.initFunctionSection(),this.bindDownloadEvents(),this.initChangeLogSection(),this.initMobileNav(),this.bindOtherEvents(),this.stayTimeReport(),this.initTxPlayer(),this.initOffCanvas(),this.initMacDownload(),this.initAutoDomReport(),this.initMobileVideoMore()},_isIEVersion:function(e){var i=document.createElement("b");return i.innerHTML="\x3c!--[if IE "+e+"]><i></i><![endif]--\x3e",1===i.getElementsByTagName("i").length},_visibleAPIBrowerKernel:function(){var e;return void 0!==document.hidden?e="origin":["webkit","moz","o","ms"].forEach((function(i){void 0!==document[i+"Hidden"]&&(e=i)})),e},_report:function(e){new Image(1,1).src="/wework_admin/report?q="+encodeURIComponent(e)+"&r="+Math.random()+"&_t="+(new Date-0)},reportlog:function(e){seajs.use([window.LOG_REPORT_LIB_PATH],(function(i){i.stat("sgkvuin_report",e)}))},initAutoDomReport:function(){var e=this;$(document).on("click","[data-js-click-report-log]",(function(){var i=this.getAttribute("data-js-click-report-log").split(","),n=i[0],o=i[1];e.reportlog({kv:n.trim?n.trim():n,key:o.trim?o.trim():o,id:0,corpid:0,value:1})}))},initBannerVideo:function(){var e=document.createElement("video"),i=document.createElement("source"),n={width:"1920",preload:"auto",autoplay:"autoplay",loop:"loop",muted:"muted"};for(var o in n)e.setAttribute(o,n[o]);window.devicePixelRatio>=2?i.setAttribute("src",earthVideoHDSource):i.setAttribute("src",earthVideoSource),i.setAttribute("type","video/mp4"),e.appendChild(i),e.style.opacity=0,document.getElementById("index_head_earthVideoWrap").appendChild(e),e.addEventListener("canplaythrough",(function i(){e.currentTime,e.style.opacity=.99,e.removeEventListener("canplaythrough",i,!1),document.getElementById("index_head_earthVideoPoster").style.display="none"}),!1)},initBannerVideo2:function(){if(!this.isMobile){document.getElementById("index_head_earthVideoPoster").classList.add("index_am_fadeOut2");var e=document.getElementById("index_head_earthVideoBox");e&&(e.play(),e.classList.add("index_am_fadeIn2"))}},bindScrollEvents:function(){var e=this;e.isAddIndexTopClass=!1,e.isLazyLoadNewsDone=!1,e.isLazyloadCasePicsDone=!1;var i=window.innerWidth-$(".js_frame_container").width(),n=i/2;console.log(i);var o=document.getElementById("indexHead"),t=!0,a=document.getElementById("js_index_main").offsetTop||700,s=$(".frame_mainBody_inner");if(e.isMobile){var d=!1;s.scroll((function(i){s.scrollTop()>561?(d||($(".js_mobileTop").velocity("slideDown",{duration:100}),$(".js_mobileNav_menu").addClass("index_mobileNav_menu_Fixed"),d=!0),e.isLazyLoadNewsDone||e.lazyLoadNews()):d&&($(".js_mobileTop").velocity("slideUp",{duration:100}),$(".js_mobileNav_menu").removeClass("index_mobileNav_menu_Fixed"),d=!1)}))}else{window.onmousewheel=function(){};var r=function(i){!function(i){if(i<0&&(i=0),i>=400?.9:0==i?0:i/400,e.isSafari&&(i>a?t&&(t=!1):t||(t=!0)),!isIE){var s="";void 0!==document.body.style.transform?s="transform":["webkit","moz","o","ms"].forEach((function(e){void 0!==document.body.style[e+"Transform"]&&(s=e+"Transform")})),s?o.style[s]="translate3d(0,"+.5*i+"px,0)":o.style.top=.5*i+"px"}i>200&&(e.isLazyloadCasePicsDone||e.lazyLoadCasePics()),i>644?(e.isLazyLoadNewsDone||e.lazyLoadNews(),e.isAddIndexTopClass||(e.isAddIndexTopClass=!0,$(".index_top").addClass("index_top_White").removeClass("index_top_Init"),$(".index_top_White").hide().slideDown(150),$(".index_top_inside").css("left","-"+n+"px"))):e.isAddIndexTopClass&&(e.isAddIndexTopClass=!1,$(".index_top_White").slideUp(150,(function(){$(".index_top").removeClass("index_top_White").addClass("index_top_Init").show(),$(".index_top_inside").css("left",0)})))}(s.scrollTop())};r(),s.scroll(r)}},initBannerAnim:function(){if(this.isMobile)return!1;var e={wrapper:document.getElementById("js_v3Style_am"),animType:"html",loop:!0,prerender:!0,autoplay:!0,path:window.bodymovinDataPath};this.bodymovinAnim=window.bodymovin.loadAnimation(e)},lazyLoadNews:function(){var e=this;if(e.isLazyLoadNewsDone)return!1;e.isLazyLoadNewsDone=!0,console.log("lazyLoadNews"),_.debounce((function(){var i=$(".js_index_newsList");if(i.children()&&i.children().length)return!1;$.ajax({type:"GET",url:"/nl/index/news_list",dataType:"json",data:{limit:2,from:"ww_index"},success:function(n){e.isLazyLoadNewsDone=!0;var o="";(n.list||[]).forEach((function(e){o+=function(e){return 0==+(e=e||{}).tasktype?'<li class="index_log_section_list_item index_log_section_list_news"><a href="/nl/index/news?from=ww_index" target="_blank"><span class="index_log_section_list_news_title">'+e.title+'</span><i class="ww_officialImg  ww_officialImg_Activities"></i></a></li>':'<li class="index_log_section_list_item index_log_section_list_news"><a href="/nl/index/news?from=ww_index" target="_blank"><span class="index_log_section_list_news_title">'+e.title+'</span><span class="index_log_section_list_date">'+e.event_time_str+"</span></a></li>"}(e)})),i.html(o)},error:function(i){console.log(i),e.isLazyLoadNewsDone=!1,e.lazyLoadNews()}})}),500)()},lazyLoadCasePics:function(){if(this.isMobile)return!1;this.isLazyloadCasePicsDone=!0,console.log("lazyLoadCasePics"),"1"!==$(".js_caselist").attr("data-done")&&($(".js_caselist_pic").each((function(){var e=$(this).data("style");e&&$(this).attr("style",e)})),$(".js_caselist").attr("data-done","1"))},bindDownloadEvents:function(){if(this.isMobile)return!1;window.adclick&&($(".index_download_item_Window").on("click",(function(){var e=window.fbq,i=window.gtag;e?e("track","Download_Windows"):i&&i("event","conversion",{send_to:"AW-658693545/ObfiCO2OocoBEKm7i7oC"})})),$(".index_download_item_Mac").on("click",(function(){var e=window.fbq,i=window.gtag;e?e("track","Download_Mac"):i&&i("event","conversion",{send_to:"AW-658693545/y8h4CLT7tMoBEKm7i7oC"})})));var e=function(e,i,n){var o=4*n;isIE||isFF?$('[plat="'+e+'"] img')[0].src="https://work.weixin.qq.com/wework_admin/genqrcode?action=commdownload&platform="+e+"&from="+i+"&qr_size="+o:$('[plat="'+e+'"] img')[0].style.content='url("https://work.weixin.qq.com/wework_admin/genqrcode?action=commdownload&platform='+e+"&from="+i+"&qr_size="+o+'")'};e("ios",comeFrom,window.devicePixelRatio),e("android",comeFrom,window.devicePixelRatio)},initTxPlayer:function(){var e=this;if(e.isMobile)return!1;var i=$(".js_index_video_playBtn"),n=$(".js_index_videoDialogCLose");if(!Txplayer){console.log("Txplayer no reg!");var o=document.getElementsByTagName("head")[0],t=document.createElement("script");t.type="text/javascript",t.src="https://wwcdn.weixin.qq.com/node/wework/css/txplayer.b1f9e914a9.js",o.appendChild(t)}console.log("start reg Txplayer");i&&i.click((function(){var i=$(this).attr("vid");$(".ww_mask").addClass("ww_mask_Show"),e.playingPlayer=function(e){return new Txplayer({containerId:"js_index_VideoWrap",width:"100%",vid:e||"p0768c8s7xm",isHtml5UseFakeFullScreen:!0,height:556,poster:"none",settings:{UiControl:{subPlugins:["UiControlPlay","UiPlayNext","UiShowTime","UiBarrageBtn","UiVolume","UiProgress","UiSettings","UiOverlayPlay","UiDefinition","UiWindowFullScreen"]}}})}(i),$(".js_index_Video").show(),e.playingPlayer.play?e.playingPlayer.play({vid:i}):e.playingPlayer.on("ready",(function(){e.playingPlayer.dropped||e.playingPlayer.play({vid:i})}))})),n&&n.click((function(i){$(".ww_mask").removeClass("ww_mask_Show"),$(".js_index_Video").hide(),e.playingPlayer.stop(),e.playingPlayer.dropped=!1,e.playingPlayer=null}))},pageSpeedReport:function(){var e="navigationStart|unloadEventStart|unloadEventEnd|redirectStart|redirectEnd|fetchStart|domainLookupStart|domainLookupEnd|connectStart|connectEnd|requestStart|responseStart|responseEnd|domLoading|domInteractive|domContentLoadedEventStart|domContentLoadedEventEnd|domComplete|loadEventStart|loadEventEnd".split("|"),i=new Date-36e5,n=Number("300000")||3e5;!function(o){if(o){var t=window,a=t.document,s=!1,d=(t.webkitPerformance||t.performance).timing;if(d.loadEventEnd)_();else{function r(){l&&t.clearInterval(l),c&&t.clearTimeout(c),l=c=null}a.addEventListener&&a.addEventListener("load",(function(){r(),_()}),!1);var l=t.setInterval((function(){d.loadEventEnd&&(r(),_())}),500),c=t.setTimeout((function(){r(),_()}),5e3)}}function _(){s||(s=!0,t.setTimeout((function(){var t=d[e[0]];if(!(t<i)){for(var a=[],s=1,r=e.length;s<r;s++){var l=Math.round((d[e[s]]||0)-t);if(l>=0){var c="st:speed=k="+(o+s-1)+"&v="+l;if(a.push("q="+encodeURIComponent(c)),l>n){a=[];break}}}a.length&&(a.push("q="+encodeURIComponent("st:speed=k="+(o+19)+"&v="+(d.requestStart-d.domainLookupStart))),a.push("q="+encodeURIComponent("st:speed=k="+(o+20)+"&v="+(d.responseStart-d.requestStart))),a.push("q="+encodeURIComponent("st:speed=k="+(o+21)+"&v="+(d.responseEnd-d.responseStart))),a.push("q="+encodeURIComponent("st:speed=k="+(o+22)+"&v="+(d.domContentLoadedEventStart-d.domLoading))),new Image(1,1).src="/wework_admin/report?"+a.join("&"))}}),0))}}(78501950)},initWxContactSection:function(){var e=(this.isMobile,"click");$(".js_wxcontacts_tab").on(e,(function(e){var i=$(this)||$(e.target),n=i.data("index");$(".js_wxcontacts_tab").removeClass("index_section_wxContacts_tab_item_Act"),$(".js_wxcontacts_tab .ww_officialImg").removeClass("index_am_zoom"),i.addClass("index_section_wxContacts_tab_item_Act"),i.find(".ww_officialImg").addClass("index_am_zoom"),$(".js_wxcontacts_tabContent > li").not(":eq("+n+")").hide();var o=$(".js_wxcontacts_tabContent > li:eq("+n+")");o.show(),o.find(".index_section_wxContacts_main_img").addClass("index_am_fadeInRight"),o.find(".index_section_wxContacts_main_part:eq(0)").css("opacity",1)}))},initCollaborationSection:function(){var e=(this.isMobile,"click");$(".js_collaboration_tab").on(e,(function(e){var i=$(this)||$(e.target),n=i.data("index");$(".js_collaboration_tab").removeClass("index_section_wxContacts_tab_item_Act"),$(".js_collaboration_tab .ww_officialImg").removeClass("index_am_zoom"),i.addClass("index_section_wxContacts_tab_item_Act"),i.find(".ww_officialImg").addClass("index_am_zoom"),$(".js_collaboration_tabContent > li").not(":eq("+n+")").hide();var o=$(".js_collaboration_tabContent > li:eq("+n+")");o.show(),o.find(".index_section_wxContacts_main_img").addClass("index_am_fadeInRight"),o.find(".index_section_wxContacts_main_part:eq(0)").css("opacity",1)}))},initMobileNav:function(){if(this.isMobile){var e=$(".js_mobileNav_menu"),i=($(".js_mobileNav_more_sub"),$(".js_mobileNav_more"));$(".js_mobileNav_nav").on("tap",(function(i){return i.stopPropagation(),$(this).hasClass("index_mobileTop_nav"),"none"===e.css("display")?e.velocity("slideDown",{duration:200}):e.velocity("slideUp",{duration:200}),!1})),i.on("tap",(function(){var e=$(this).children(".js_mobileNav_more_sub");"none"===e.css("display")?e.velocity("slideDown",{duration:200}):e.velocity("slideUp",{duration:200})})),$("div").parents().on("tap",(function(i){return i.stopPropagation(),0===e.has(i.target).length&&e.velocity("slideUp",{duration:200}),!1}))}},initMobileVideoMore:function(){this.isMobile&&($(".js_bottomVideo_more").on("click",(function(e){return e.stopPropagation(),$(".js_mask").addClass("ww_mask_Show"),$(".js_videoNavPopDialog").show(),!1})),$(".js_videoNavPopDialog_close").on("click",(function(e){return e.stopPropagation(),$(".js_mask").removeClass("ww_mask_Show"),$(".js_videoNavPopDialog").hide(),!1})))},bindOtherEvents:function(){var e=this;$(".js_open_website").on("click",(function(){e._report("u=index_go_open_website")}))},initFunctionSection:function(){var e=this,i=$(".js_feature_extend_flod_btn");i.on("click",(function(n){var o=$(n.currentTarget),t=$(".js_feature_flod_container");o.hasClass("js_feature_status_extend")?(e._isIEVersion(8)||e._isIEVersion(9)?t.hide():t.velocity("slideUp",{duration:200}),i.removeClass("js_feature_status_extend index_section_operate_more_Collapse"),e._report("u=index|btn_click|feature|close")):(e._isIEVersion(8)||e._isIEVersion(9)?t.show():t.velocity("slideDown",{duration:200}),i.addClass("js_feature_status_extend index_section_operate_more_Collapse"),e._report("u=index|btn_click|feature|open"))}))},initChangeLogSection:function(){var e=this;$(".index_log_cnt").on("click",".js_version_title_btn",(function(i){var n=$(i.currentTarget).next(".js_log_list");n.parents(".index_log_section").hasClass("index_log_section_Open")?e._isIEVersion(8)||e._isIEVersion(9)?n.hide().parents(".index_log_section").removeClass("index_log_section_Open"):n.velocity("slideUp",{duration:200}).parents(".index_log_section").removeClass("index_log_section_Open"):e._isIEVersion(8)||e._isIEVersion(9)?n.show().parents(".index_log_section").addClass("index_log_section_Open"):n.velocity("slideDown",{duration:200}).parents(".index_log_section").addClass("index_log_section_Open")})),e.isLogSectionWrapShow=!1,$(".js_log_operate").on("click",(function(i){e.getUpdateLogSubs()}))},getUpdateLogSubs:function(){var e=this,i=$(".js_log_indentList");i.children().length?e.handleUpdateLogSubsEvent():($.ajax({type:"POST",url:"/nl/index/log",dataType:"json",data:{from:"ww_index"},success:function(n){var o=n.data&&n.data.html||"";o&&(i.html(o),e.handleUpdateLogSubsEvent())},error:function(e){console.log(e)}}),e._report("u=index_open_log_subs"))},handleUpdateLogSubsEvent:function(){var e=$(".index_log_sectionWrap");this.isLogSectionWrapShow?(this._isIEVersion(8)||this._isIEVersion(9)?e.hide():e.velocity("slideUp",{duration:200}),$(".index_log_operate").removeClass("index_log_operate_Collapase")):(this._isIEVersion(8)||this._isIEVersion(9)?e.show():e.velocity("slideDown",{duration:200}),$(".index_log_operate").addClass("index_log_operate_Collapase")),this.isLogSectionWrapShow=!this.isLogSectionWrapShow},stayTimeReport:function(){var e,i=this,n=0,o=null,t=1e4;function a(){n<10&&(o=new Date,t<0&&(t=0),e=setTimeout((function(){t=1e4,i._report("k=index|user|time|"+ ++n+"0"),a()}),t))}if(!isIE){var s=i._visibleAPIBrowerKernel();document.addEventListener("origin"==s?"visibilitychange":s+"visibilitychange",(function(){"visible"==("origin"==s?document.visibilityState:document[s+"VisibilityState"])?a():(t-=new Date-o,e&&clearTimeout(e))}),!1)}a()},initOffCanvas:function(){if(this.isMobile){var e=$(".js_offCanvas_close, .js_offCanvas_mask"),i=$(".js_mainBody");e.on("click",(function(e){i.toggleClass("frame_mainBody_Open")})),$(".frame_offCanvas_multiNav_item_link, .frame_offCanvas_multiNav_sub_item").on("click",(function(e){i.toggleClass("frame_mainBody_Open")}))}},initMacDownload:function(){var e=this,i=$(".js_mask"),n=$("#macDownloadDialog");$(".js_mac_download").on("click",(function(o){o.preventDefault(),i.addClass("ww_mask_Show"),n.show(),e.reportlog({kv:79506103,key:"click_mac_icon_download",id:0,corpid:0,value:1})})),$("#macDownloadDialog_close").on("click",(function(){i.removeClass("ww_mask_Show"),n.hide(),e.reportlog({kv:79506103,key:"click_mac_icon_close_popup",id:0,corpid:0,value:1})}))}};window.onload=function(){OfficialIndex.init()};