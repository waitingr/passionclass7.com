window.wwLog=function(){console.log.apply(console,arguments)},window.createAegisClient=function(e){var n=e.curDate||+new Date;if(window.Aegis&&!e.isDebug){var t=new window.Aegis({id:e.id,uin:e.uin,reportApiSpeed:!0,reportAssetSpeed:!0,offlineLog:!0,offlineLogExp:14,speedSample:!1,beforeReport:function(e){if(e&&"4"==e.level){var i={level:e.level,date:n,type:"REPORT_LOG",msg:e.msg};try{t.flog&&t.flog.add({level:2,time:Date.now(),msg:i})}catch(e){}}},beforeReportSpeed:function(e){var i={url:e.url,date:n,type:"SPEED",msg:e};return-1===(e.url||"").indexOf("aegis.qq.com")&&t.flog&&t.flog.add({level:2,time:Date.now(),msg:i}),e},api:{retCodeHandler:function(e,t,i){try{var o=JSON.parse(e)||{},a=+new Date/1e3;e.length>1500&&e.replace(/"/g,"").substring(0,1500);var r={date:n,type:"SENTRY",msg:{category:"aegis-xhr",url:t,timestamp:a,res:{status:i&&i.status}}};-1===(t||"").indexOf("aegis.qq.com")&&window.aegis.flog&&window.aegis.flog.add({level:2,time:Date.now(),msg:r});var l=o.result&&o.result.errCode||0;return{isErr:"number"==typeof l&&0!=l,code:l}}catch(e){return{isErr:!1,code:0}}}}});return window.wwLog=function(){var e={date:n,type:"custom",msg:{text:arguments}};try{t.flog&&t.flog.add({level:2,time:Date.now(),msg:e})}catch(e){}},t}},window.initSentry=function(e){var n=window.curDate||+new Date;Sentry.init({release:window.__NO_COMBO__?"wwmng@latest":"wwmng@combo",ignoreErrors:[/statusCode/gi],dsn:e.dsn,beforeBreadcrumb:function(e,t){if(window.aegis&&window.aegis.flog)try{var i={date:n,type:"SENTRY",msg:e};"http"===e.type&&e.data&&e.data.url.indexOf("aegis.qq.com")>-1||window.aegis.flog.add({level:2,time:Date.now(),msg:i})}catch(e){}return e},beforeSend:function(e,n){if(!window.__NO_COMBO__)return e;if(n.originalException){var t=n.originalException.stack&&n.originalException.stack.split("\n")||[];if(t[1]&&t[1].indexOf("eval")>-1){var i=(a=t[1],r=a.match(/at ([\S]+) \(/)||[""],l=a.match(/<anonymous>:(\d+):(\d+)/m)||[],s=a.match(/eval at (\w\S+)\s/m)||[],c=r[1].split(".").slice(1).join("."),g=["/node/wwmng/wwmng/js/",(o=s[1]||"anonymousEval",o.replace("$_number$","").split("___").join("/").replace(/\$_dot\$/g,".").replace(/\$_minus\$/g,"-").replace(/\$_at\$/g,"@")),".js"].join(""),{lineno:l[1]||1,colno:l[2]||1,filename:g,functionName:c,filenameWithoutHash:g.substring(0,g.length-11)});i.functionName&&(e.fingerprint=[n.originalException.message,i.filenameWithoutHash,i.functionName]),t.splice(1,0,["at eval (",i.filename,":",i.lineno,":",i.colno,")"].join("")),n.stack=t.join("\n"),e.exception.values[0].stacktrace.frames.push({colno:i.colno,filename:i.filename,function:"HTMLDocument.eval",in_app:!0,lineno:i.lineno})}}var o,a,r,l,s,c,g;return e}}),e&&e.vid&&Sentry.setTags({vid:e.vid,corp_id:e.corp_id})};