(window.webpackJsonp=window.webpackJsonp||[]).push([["pages/threerd~advanced/menusetting4Web1~album/edit/edit~city/service_edit/service_edit~complain/public_com~threerd"],{"./src/3rd/editor/common/monitor.js":function(e,t,n){t=function(e){var i=n("./src/mmbizweb-web2-common/modules/utils/cgi.js"),a=[],o={setAvg:function(e,t,n){return a.push(e+"_"+t+"_"+n),a.push(e+"_"+(t-1)+"_1"),o},setSum:function(e,t,n){return a.push(e+"_"+t+"_"+n),o},send:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(0!=a.length){e=!1!==e.async;if(60<a.length)i.post({url:"/mp/jsmonitor?",async:e,data:{idkey:a.join(";")}});else{var t=[];for(t.push(a.splice(0,60));0<a.length;)t.push(a.splice(0,60));for(var n=0,o=t.length;n<o;n++)(new Image).src="//mp.weixin.qq.com/mp/jsmonitor?idkey="+t[n].join(";")+"&t="+Math.random()}a=[]}}};return o}.call(t,n,t,e);void 0===t||(e.exports=t)},"./src/3rd/soundmanager2.js":function(e,t,n){function mt(e){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/** @license
 *
 * SoundManager 2: JavaScript Sound for the Web
 * ----------------------------------------------
 * http://schillmania.com/projects/soundmanager2/
 *
 * Copyright (c) 2007, Scott Schiller. All rights reserved.
 * Code provided under the BSD License:
 * http://schillmania.com/projects/soundmanager2/license.txt
 *
 * V2.97a.20130512
 */void 0===(n=function(){"use strict";var pt,e=null;function t(e,t){this.setupOptions={url:e||null,flashVersion:8,debugMode:!1,debugFlash:!1,useConsole:!1,consoleOnly:!0,waitForWindowLoad:!1,bgColor:"#ffffff",useHighPerformance:!1,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:!1,useHTML5Audio:!0,html5Test:/^(probably|maybe)$/i,preferFlash:!0,noSWFCache:!1,idPrefix:"sound"},this.defaultOptions={autoLoad:!1,autoPlay:!1,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:!0,multiShotEvents:!1,position:null,pan:0,stream:!0,to:null,type:null,usePolicyFile:!1,volume:100},this.flash9Options={isMovieStar:null,usePeakData:!1,useWaveformData:!1,useEQData:!1,onbufferchange:null,ondataerror:null},this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null},this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:!0},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:!1},ogg:{type:["audio/ogg; codecs=vorbis"],required:!1},opus:{type:["audio/ogg; codecs=opus","audio/opus"],required:!1},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:!1}},this.movieID="sm2-container",this.id=t||"sm2movie",this.debugID="soundmanager-debug",this.debugURLParam=/([#?&])debug=1/i,this.versionNumber="V2.97a.20130512",this.version=null,this.movieURL=null,this.altURL=null,this.swfLoaded=!1,this.enabled=!1,this.oMC=null,this.sounds={},this.soundIDs=[],this.muted=!1,this.didFlashBlock=!1,this.filePattern=null,this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i},this.features={buffering:!1,peakData:!1,waveformData:!1,eqData:!1,movieStar:!1},this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null},this.html5={usingFlash:null},this.flash={},this.html5Only=!1,this.ignoreFlash=!1;var u,_,n,i,D,g,M,y,a,L,d,f,s,c,h,p,T,P,S,F,I,H,E,A,k,C,x,R,N,U,j,B,W,w,q,V,Q,$,J,K,X,v,z,G,Z,Y,ee,te,ne,oe,ie,ae,se,re,le,ue,de,fe,ce,he,pe,me,_e,ge,ye,b=this,we=null,O=null,r="soundManager",o=r+": ",ve="HTML5::",be=navigator.userAgent,Oe=window.location.href.toString(),m=document,De=[],Me=!0,Le=!1,Te=!1,l=!1,Pe=!1,Se=!1,Fe=0,Ie=["log","info","warn","error"],He=8,Ee=null,Ae=null,ke=!1,Ce=!1,xe=0,Re=null,Ne=[],Ue=null,je=Array.prototype.slice,Be=!1,We=0,qe=be.match(/(ipad|iphone|ipod)/i),Ve=be.match(/android/i),Qe=be.match(/msie/i),$e=be.match(/webkit/i),Je=be.match(/safari/i)&&!be.match(/chrome/i),Ke=be.match(/opera/i),Xe=be.match(/firefox/i),ze=be.match(/(mobile|pre\/|xoom)/i)||qe||Ve,Ge=!Oe.match(/usehtml5audio/i)&&!Oe.match(/sm2\-ignorebadua/i)&&Je&&!be.match(/silk/i)&&be.match(/OS X 10_6_([3-7])/i),Ze=window.console!==pt&&console.log!==pt,Ye=m.hasFocus!==pt?m.hasFocus():null,et=Je&&(m.hasFocus===pt||!m.hasFocus()),tt=!et,nt=/(mp3|mp4|mpa|m4a|m4b)/i,ot=1e3,it="about:blank",at=m.location?m.location.protocol.match(/http/i):null,st=at?"":"http://",rt=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,lt=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","m4b","mp4v","3gp","3g2"],ut=new RegExp("\\.("+lt.join("|")+")(\\?.*)?$","i");function dt(e){return b.preferFlash&&de&&!b.ignoreFlash&&b.flash[e]!==pt&&b.flash[e]}function ft(e){var e=je.call(e),t=e.length;return ge?(e[1]="on"+e[1],3<t&&e.pop()):3===t&&e.push(!1),e}function ct(e,t){var n=e.shift(),t=[ye[t]];ge?n[t](e[0],e[1]):n[t].apply(n,e)}function ht(n){return function(e){var t=this._s,t=t&&t._a?n.call(this,e):(t&&t.id?b._wD(t.id+": Ignoring "+e.type):b._wD(ve+"Ignoring "+e.type),null);return t}}this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i,this.useAltURL=!at,Q={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"},this.hasHTML5=function(){try{return Audio!==pt&&(Ke&&opera!==pt&&opera.version()<10?new Audio(null):new Audio).canPlayType!==pt}catch(e){return!1}}(),this.setup=function(e){var t=!b.url;return e!==pt&&l&&Ue&&b.ok()&&(e.flashVersion!==pt||e.url!==pt||e.html5Test!==pt)&&X(w("setupLate")),d(e),e&&(t&&k&&e.url!==pt&&b.beginDelayedInit(),k||e.url===pt||"complete"!==m.readyState||setTimeout(E,1)),b},this.ok=function(){return Ue?l&&!Pe:b.useHTML5Audio&&b.hasHTML5},this.supported=this.ok,this.getMovie=function(e){return _(e)||m[e]||window[e]},this.createSound=function(e,t){var n,o=null,i=r+".createSound(): ",a=i+w(l?"notOK":"notReady");if(!l||!b.ok())return X(a),!1;if((n=L(e=t!==pt?{id:e,url:t}:e)).url=Y(n.url),void 0===n.id&&(n.id=b.setupOptions.idPrefix+We++),n.id.toString().charAt(0).match(/^[0-9]$/)&&b._wD(i+w("badID",n.id),2),b._wD(i+n.id+(n.url?" ("+n.url+")":""),1),v(n.id,!0))return b._wD(i+n.id+" exists",1),b.sounds[n.id];function s(){return n=J(n),b.sounds[n.id]=new u(n),b.soundIDs.push(n.id),b.sounds[n.id]}if(ne(n))o=s(),b._wD(n.id+": Using HTML5"),o._setup_html5(n);else{if(b.html5Only)return b._wD(n.id+": No HTML5 support for this sound, and no Flash. Exiting."),s();if(b.html5.usingFlash&&n.url&&n.url.match(/data\:/i))return b._wD(n.id+": data: URIs not supported via Flash. Exiting."),s();8<g&&(null===n.isMovieStar&&(n.isMovieStar=!!(n.serverURL||n.type&&n.type.match(rt)||n.url&&n.url.match(ut))),n.isMovieStar&&(b._wD(i+"using MovieStar handling"),1<n.loops&&y("noNSLoop"))),n=K(n,i),o=s(),8===g?O._createSound(n.id,n.loops||1,n.usePolicyFile):(O._createSound(n.id,n.url,n.usePeakData,n.useWaveformData,n.useEQData,n.isMovieStar,!!n.isMovieStar&&n.bufferTime,n.loops||1,n.serverURL,n.duration||null,n.autoPlay,!0,n.autoLoad,n.usePolicyFile),n.serverURL||(o.connected=!0,n.onconnect&&n.onconnect.apply(o))),n.serverURL||!n.autoLoad&&!n.autoPlay||o.load(n)}return!n.serverURL&&n.autoPlay&&o.play(),o},this.destroySound=function(e,t){if(!v(e))return!1;var n,o=b.sounds[e];for(o._iO={},o.stop(),o.unload(),n=0;n<b.soundIDs.length;n++)if(b.soundIDs[n]===e){b.soundIDs.splice(n,1);break}return t||o.destruct(!0),o=null,delete b.sounds[e],!0},this.load=function(e,t){return!!v(e)&&b.sounds[e].load(t)},this.unload=function(e){return!!v(e)&&b.sounds[e].unload()},this.onPosition=function(e,t,n,o){return!!v(e)&&b.sounds[e].onposition(t,n,o)},this.onposition=this.onPosition,this.clearOnPosition=function(e,t,n){return!!v(e)&&b.sounds[e].clearOnPosition(t,n)},this.play=function(e,t){var n=null,o=t&&!(t instanceof Object);if(!l||!b.ok())return X(r+".play(): "+w(l?"notOK":"notReady")),!1;if(v(e,o))o&&(t={url:t});else{if(!o)return!1;(t=o?{url:t}:t)&&t.url&&(b._wD(r+'.play(): Attempting to create "'+e+'"',1),t.id=e,n=b.createSound(t).play())}return n=null===n?b.sounds[e].play(t):n},this.start=this.play,this.setPosition=function(e,t){return!!v(e)&&b.sounds[e].setPosition(t)},this.stop=function(e){return!!v(e)&&(b._wD(r+".stop("+e+")",1),b.sounds[e].stop())},this.stopAll=function(){for(var e in b._wD(r+".stopAll()",1),b.sounds)b.sounds.hasOwnProperty(e)&&b.sounds[e].stop()},this.pause=function(e){return!!v(e)&&b.sounds[e].pause()},this.pauseAll=function(){for(var e=b.soundIDs.length-1;0<=e;e--)b.sounds[b.soundIDs[e]].pause()},this.resume=function(e){return!!v(e)&&b.sounds[e].resume()},this.resumeAll=function(){for(var e=b.soundIDs.length-1;0<=e;e--)b.sounds[b.soundIDs[e]].resume()},this.togglePause=function(e){return!!v(e)&&b.sounds[e].togglePause()},this.setPan=function(e,t){return!!v(e)&&b.sounds[e].setPan(t)},this.setVolume=function(e,t){return!!v(e)&&b.sounds[e].setVolume(t)},this.mute=function(e){var t=0;if(e=e instanceof String?null:e)return!!v(e)&&(b._wD(r+'.mute(): Muting "'+e+'"'),b.sounds[e].mute());for(b._wD(r+".mute(): Muting all sounds"),t=b.soundIDs.length-1;0<=t;t--)b.sounds[b.soundIDs[t]].mute();return b.muted=!0},this.muteAll=function(){b.mute()},this.unmute=function(e){var t;if(e=e instanceof String?null:e)return!!v(e)&&(b._wD(r+'.unmute(): Unmuting "'+e+'"'),b.sounds[e].unmute());for(b._wD(r+".unmute(): Unmuting all sounds"),t=b.soundIDs.length-1;0<=t;t--)b.sounds[b.soundIDs[t]].unmute();return!(b.muted=!1)},this.unmuteAll=function(){b.unmute()},this.toggleMute=function(e){return!!v(e)&&b.sounds[e].toggleMute()},this.getMemoryUse=function(){var e=0;return e=O&&8!==g?parseInt(O._getMemoryUse(),10):e},this.disable=function(e){var t;if(e===pt&&(e=!1),Pe)return!1;for(Pe=!0,y("shutdown",1),t=b.soundIDs.length-1;0<=t;t--)j(b.sounds[b.soundIDs[t]]);return a(e),le.remove(window,"load",h),!0},this.canPlayMIME=function(e){var t;return t=!(t=b.hasHTML5?oe({type:e}):t)&&Ue?e&&b.ok()?!!(8<g&&e.match(rt)||e.match(b.mimePattern)):null:t},this.canPlayURL=function(e){var t;return t=!(t=b.hasHTML5?oe({url:e}):t)&&Ue?e&&b.ok()?!!e.match(b.filePattern):null:t},this.canPlayLink=function(e){return!(e.type===pt||!e.type||!b.canPlayMIME(e.type))||b.canPlayURL(e.href)},this.getSoundById=function(e,t){if(!e)return null;var n=b.sounds[e];return n||t||b._wD(r+'.getSoundById(): Sound "'+e+'" not found.',2),n},this.onready=function(e,t){var n="onready";if("function"!=typeof e)throw w("needFunction",n);return l&&b._wD(w("queue",n)),t=t||window,s(n,e,t),c(),!0},this.ontimeout=function(e,t){var n="ontimeout";if("function"!=typeof e)throw w("needFunction",n);return l&&b._wD(w("queue",n)),t=t||window,s(n,e,t),c({type:n}),!0},this._writeDebug=function(e,t){var n,o;return!!b.debugMode&&(!!(Ze&&b.useConsole&&(t&&"object"===mt(t)||Ie[t]!==pt&&console[Ie[t]](e),b.consoleOnly))||!!(n=_("soundmanager-debug"))&&(o=m.createElement("div"),++Fe%2==0&&(o.className="sm2-alt"),t=t===pt?0:parseInt(t,10),o.appendChild(m.createTextNode(e)),t&&(2<=t&&(o.style.fontWeight="bold"),3===t&&(o.style.color="#ff3333")),n.insertBefore(o,n.firstChild),!(n=null)))},-1!==Oe.indexOf("sm2-debug=alert")&&(this._writeDebug=function(e){window.alert(e)}),this._wD=this._writeDebug,this._debug=function(){var e,t;for(y("currentObj",1),e=0,t=b.soundIDs.length;e<t;e++)b.sounds[b.soundIDs[e]]._debug()},this.reboot=function(e,t){var n,o,i;for(b.soundIDs.length&&b._wD("Destroying "+b.soundIDs.length+" SMSound object"+(1!==b.soundIDs.length?"s":"")+"..."),n=b.soundIDs.length-1;0<=n;n--)b.sounds[b.soundIDs[n]].destruct();if(O)try{Qe&&(Ae=O.innerHTML),Ee=O.parentNode.removeChild(O)}catch(e){y("badRemove",2)}if(Ae=Ee=Ue=O=null,b.enabled=k=l=ke=Ce=Le=Te=Pe=Be=b.swfLoaded=!1,b.soundIDs=[],b.sounds={},We=0,e)De=[];else for(n in De)if(De.hasOwnProperty(n))for(o=0,i=De[n].length;o<i;o++)De[n][o].fired=!1;return t||b._wD(r+": Rebooting..."),b.html5={usingFlash:null},b.flash={},b.html5Only=!1,b.ignoreFlash=!1,window.setTimeout(function(){H(),t||b.beginDelayedInit()},20),b},this.reset=function(){return y("reset"),b.reboot(!0,!0)},this.getMoviePercent=function(){return O&&"PercentLoaded"in O?O.PercentLoaded():null},this.beginDelayedInit=function(){Se=!0,E(),setTimeout(function(){return!Ce&&(x(),I(),Ce=!0)},20),p()},this.destruct=function(){b._wD(r+".destruct()"),b.disable(!0)},u=function(e){var i,c,t,o,l,h,p,m,_,u=this,d=!1,a=[],s=0,r=null,f={duration:null,time:null};this.id=e.id,this.sID=this.id,this.url=e.url,this.options=L(e),this.instanceOptions=this.options,this._iO=this.instanceOptions,this.pan=this.options.pan,this.volume=this.options.volume,this.isHTML5=!1,this._a=null,_=!this.url,this.id3={},this._debug=function(){b._wD(u.id+": Merged options:",u.options)},this.load=function(e){var t;if(e!==pt?u._iO=L(e,u.options):(e=u.options,u._iO=e,r&&r!==u.url&&(y("manURL"),u._iO.url=u.url,u.url=null)),u._iO.url||(u._iO.url=u.url),u._iO.url=Y(u._iO.url),u.instanceOptions=u._iO,t=u._iO,b._wD(u.id+": load ("+t.url+")"),!t.url&&!u.url)return b._wD(u.id+": load(): url is unassigned. Exiting.",2),u;if(u.isHTML5||8!==g||u.url||t.autoPlay||b._wD(u.id+": Flash 8 load() limitation: Wait for onload() before calling play().",1),t.url===u.url&&0!==u.readyState&&2!==u.readyState)return y("onURL",1),3===u.readyState&&t.onload&&_e(u,function(){t.onload.apply(u,[!!u.duration])}),u;if(u.loaded=!1,u.readyState=1,u.playState=0,u.id3={},ne(t))u._setup_html5(t)._called_load?b._wD(u.id+": Ignoring request to load again"):(u._html5_canplay=!1,u.url!==t.url&&(b._wD(y("manURL")+": "+t.url),u._a.src=t.url,u.setPosition(0)),u._a.autobuffer="auto",u._a.preload="auto",u._a._called_load=!0,t.autoPlay&&u.play());else{if(b.html5Only)return b._wD(u.id+": No flash support. Exiting."),u;if(u._iO.url&&u._iO.url.match(/data\:/i))return b._wD(u.id+": data: URIs not supported via Flash. Exiting."),u;try{u.isHTML5=!1,u._iO=K(J(t)),t=u._iO,8===g?O._load(u.id,t.url,t.stream,t.autoPlay,t.usePolicyFile):O._load(u.id,t.url,!!t.stream,!!t.autoPlay,t.loops||1,!!t.autoLoad,t.usePolicyFile)}catch(e){y("smError",2),M("onload",!1),R({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:!0})}}return u.url=t.url,u},this.unload=function(){return 0!==u.readyState&&(b._wD(u.id+": unload()"),u.isHTML5?(o(),u._a&&(u._a.pause(),r=ae(u._a))):8===g?O._unload(u.id,it):O._unload(u.id),i()),u},this.destruct=function(e){b._wD(u.id+": Destruct"),u.isHTML5?(o(),u._a&&(u._a.pause(),ae(u._a),Be||t(),u._a._s=null,u._a=null)):(u._iO.onfailure=null,O._destroySound(u.id)),e||b.destroySound(u.id,!0)},this.play=function(e,t){var n,o,i,a,s=null,r=u.id+": play(): ";if(t=t===pt||t,e=e||{},u.url&&(u._iO.url=u.url),u._iO=L(u._iO,u.options),u._iO=L(e,u._iO),u._iO.url=Y(u._iO.url),u.instanceOptions=u._iO,!u.isHTML5&&u._iO.serverURL&&!u.connected)return u.getAutoPlay()||(b._wD(r+" Netstream not connected yet - setting autoPlay"),u.setAutoPlay(!0)),u;if(ne(u._iO)&&(u._setup_html5(u._iO),l()),1!==u.playState||u.paused||(u._iO.multiShot?b._wD(r+"Already playing (multi-shot)",1):(b._wD(r+"Already playing (one-shot)",1),u.isHTML5&&u.setPosition(u._iO.position),s=u)),null!==s)return s;if(e.url&&e.url!==u.url&&(u.readyState||u.isHTML5||8!==g||!_?u.load(u._iO):_=!1),u.loaded?b._wD(r.substr(0,r.lastIndexOf(":"))):0===u.readyState?(b._wD(r+"Attempting to load"),u.isHTML5||b.html5Only?u.isHTML5?u.load(u._iO):(b._wD(r+"Unsupported type. Exiting."),s=u):(u._iO.autoPlay=!0,u.load(u._iO)),u.instanceOptions=u._iO):2===u.readyState?(b._wD(r+"Could not load - exiting",2),s=u):b._wD(r+"Loading - attempting to play..."),null!==s)return s;if(!u.isHTML5&&9===g&&0<u.position&&u.position===u.duration&&(b._wD(r+"Sound at end, resetting to position:0"),e.position=0),u.paused&&0<=u.position&&(!u._iO.serverURL||0<u.position))b._wD(r+"Resuming from paused state",1),u.resume();else{if(u._iO=L(e,u._iO),null!==u._iO.from&&null!==u._iO.to&&0===u.instanceCount&&0===u.playState&&!u._iO.serverURL){if(n=function(){u._iO=L(e,u._iO),u.play(u._iO)},u.isHTML5&&!u._html5_canplay?(b._wD(r+"Beginning load for from/to case"),u.load({oncanplay:n}),s=!1):u.isHTML5||u.loaded||u.readyState&&2===u.readyState||(b._wD(r+"Preloading for from/to case"),u.load({onload:n}),s=!1),null!==s)return s;u._iO=m()}(!u.instanceCount||u._iO.multiShotEvents||u.isHTML5&&u._iO.multiShot&&!Be||!u.isHTML5&&8<g&&!u.getAutoPlay())&&u.instanceCount++,u._iO.onposition&&0===u.playState&&h(u),u.playState=1,u.paused=!1,u.position=u._iO.position===pt||isNaN(u._iO.position)?0:u._iO.position,u.isHTML5||(u._iO=K(J(u._iO))),u._iO.onplay&&t&&(u._iO.onplay.apply(u),d=!0),u.setVolume(u._iO.volume,!0),u.setPan(u._iO.pan,!0),u.isHTML5?u.instanceCount<2?(l(),n=u._setup_html5(),u.setPosition(u._iO.position),n.play()):(b._wD(u.id+": Cloning Audio() for instance #"+u.instanceCount+"..."),o=new Audio(u._iO.url),i=function(){le.remove(o,"onended",i),u._onfinish(u),ae(o),o=null},a=function(){le.remove(o,"canplay",a);try{o.currentTime=u._iO.position/ot}catch(e){X(u.id+": multiShot play() failed to apply position of "+u._iO.position/ot)}o.play()},le.add(o,"ended",i),u._iO.position?le.add(o,"canplay",a):o.play()):(s=O._start(u.id,u._iO.loops||1,9===g?u.position:u.position/ot,u._iO.multiShot||!1),9!==g||s||(b._wD(r+"No sound hardware, or 32-sound ceiling hit",2),u._iO.onplayerror&&u._iO.onplayerror.apply(u)))}return u},this.start=this.play,this.stop=function(e){var t,n=u._iO;return 1===u.playState&&(b._wD(u.id+": stop()"),u._onbufferchange(0),u._resetOnPosition(0),u.paused=!1,u.isHTML5||(u.playState=0),p(),n.to&&u.clearOnPosition(n.to),u.isHTML5?u._a&&(t=u.position,u.setPosition(0),u.position=t,u._a.pause(),u.playState=0,u._onTimer(),o()):(O._stop(u.id,e),n.serverURL&&u.unload()),u.instanceCount=0,u._iO={},n.onstop&&n.onstop.apply(u)),u},this.setAutoPlay=function(e){b._wD(u.id+": Autoplay turned "+(e?"on":"off")),u._iO.autoPlay=e,u.isHTML5||(O._setAutoPlay(u.id,e),e&&(u.instanceCount||1!==u.readyState||(u.instanceCount++,b._wD(u.id+": Incremented instance count to "+u.instanceCount))))},this.getAutoPlay=function(){return u._iO.autoPlay},this.setPosition=function(e){e===pt&&(e=0);var t,e=u.isHTML5?Math.max(e,0):Math.min(u.duration||u._iO.duration,Math.max(e,0));if(u.position=e,t=u.position/ot,u._resetOnPosition(u.position),u._iO.position=e,u.isHTML5){if(u._a){if(u._html5_canplay){if(u._a.currentTime!==t){b._wD(u.id+": setPosition("+t+")");try{u._a.currentTime=t,0!==u.playState&&!u.paused||u._a.pause()}catch(e){b._wD(u.id+": setPosition("+t+") failed: "+e.message,2)}}}else if(t)return b._wD(u.id+": setPosition("+t+"): Cannot seek yet, sound not ready",2),u;u.paused&&u._onTimer(!0)}}else e=9===g?u.position:t,u.readyState&&2!==u.readyState&&O._setPosition(u.id,e,u.paused||!u.playState,u._iO.multiShot);return u},this.pause=function(e){return u.paused||0===u.playState&&1!==u.readyState||(b._wD(u.id+": pause()"),u.paused=!0,u.isHTML5?(u._setup_html5().pause(),o()):!e&&e!==pt||O._pause(u.id,u._iO.multiShot),u._iO.onpause&&u._iO.onpause.apply(u)),u},this.resume=function(){var e=u._iO;return u.paused&&(b._wD(u.id+": resume()"),u.paused=!1,u.playState=1,u.isHTML5?(u._setup_html5().play(),l()):(e.isMovieStar&&!e.serverURL&&u.setPosition(u.position),O._pause(u.id,e.multiShot)),!d&&e.onplay?(e.onplay.apply(u),d=!0):e.onresume&&e.onresume.apply(u)),u},this.togglePause=function(){return b._wD(u.id+": togglePause()"),0===u.playState?u.play({position:9!==g||u.isHTML5?u.position/ot:u.position}):u.paused?u.resume():u.pause(),u},this.setPan=function(e,t){return e===pt&&(e=0),t===pt&&(t=!1),u.isHTML5||O._setPan(u.id,e),u._iO.pan=e,t||(u.pan=e,u.options.pan=e),u},this.setVolume=function(e,t){return e===pt&&(e=100),t===pt&&(t=!1),u.isHTML5?u._a&&(u._a.volume=Math.max(0,Math.min(1,e/100))):O._setVolume(u.id,b.muted&&!u.muted||u.muted?0:e),u._iO.volume=e,t||(u.volume=e,u.options.volume=e),u},this.mute=function(){return u.muted=!0,u.isHTML5?u._a&&(u._a.muted=!0):O._setVolume(u.id,0),u},this.unmute=function(){u.muted=!1;var e=u._iO.volume!==pt;return u.isHTML5?u._a&&(u._a.muted=!1):O._setVolume(u.id,(e?u._iO:u.options).volume),u},this.toggleMute=function(){return u.muted?u.unmute():u.mute()},this.onPosition=function(e,t,n){return a.push({position:parseInt(e,10),method:t,scope:n!==pt?n:u,fired:!1}),u},this.onposition=this.onPosition,this.clearOnPosition=function(e,t){var n;if(e=parseInt(e,10),isNaN(e))return!1;for(n=0;n<a.length;n++)e===a[n].position&&(t&&t!==a[n].method||(a[n].fired&&s--,a.splice(n,1)))},this._processOnPosition=function(){var e,t,n=a.length;if(!n||!u.playState||n<=s)return!1;for(e=n-1;0<=e;e--)!(t=a[e]).fired&&u.position>=t.position&&(t.fired=!0,s++,t.method.apply(t.scope,[t.position]));return!0},this._resetOnPosition=function(e){var t,n,o=a.length;if(!o)return!1;for(t=o-1;0<=t;t--)(n=a[t]).fired&&e<=n.position&&(n.fired=!1,s--);return!0},m=function(){var e=u._iO,t=e.from,n=e.to,o=function(){b._wD(u.id+': "To" time of '+n+" reached."),u.clearOnPosition(n,o),u.stop()},i=function(){b._wD(u.id+': Playing "from" '+t),null===n||isNaN(n)||u.onPosition(n,o)};return null===t||isNaN(t)||(e.position=t,e.multiShot=!1,i()),e},h=function(){var e,t=u._iO.onposition;if(t)for(e in t)t.hasOwnProperty(e)&&u.onPosition(parseInt(e,10),t[e])},p=function(){var e,t=u._iO.onposition;if(t)for(e in t)t.hasOwnProperty(e)&&u.clearOnPosition(parseInt(e,10))},l=function(){u.isHTML5&&z(u)},o=function(){u.isHTML5&&G(u)},(i=function(e){e||(a=[],s=0),d=!1,u._hasTimer=null,u._a=null,u._html5_canplay=!1,u.bytesLoaded=null,u.bytesTotal=null,u.duration=u._iO&&u._iO.duration?u._iO.duration:null,u.durationEstimate=null,u.buffered=[],u.eqData=[],u.eqData.left=[],u.eqData.right=[],u.failures=0,u.isBuffering=!1,u.instanceOptions={},u.instanceCount=0,u.loaded=!1,u.metadata={},u.readyState=0,u.muted=!1,u.paused=!1,u.peakData={left:0,right:0},u.waveformData={left:[],right:[]},u.playState=0,u.position=null,u.id3={}})(),this._onTimer=function(e){var t,n=!1,o={};if(u._hasTimer||e)return u._a&&(e||(0<u.playState||1===u.readyState)&&!u.paused)&&((t=u._get_html5_duration())!==f.duration&&(f.duration=t,u.duration=t,n=!0),u.durationEstimate=u.duration,(t=u._a.currentTime*ot||0)!==f.time&&(f.time=t,n=!0),(n||e)&&u._whileplaying(t,o,o,o,o)),n},this._get_html5_duration=function(){var e=u._iO,e=u._a&&u._a.duration?u._a.duration*ot:e&&e.duration?e.duration:null;return e&&!isNaN(e)&&e!==1/0?e:null},this._apply_loop=function(e,t){!e.loop&&1<t&&b._wD("Note: Native HTML5 looping is infinite.",1),e.loop=1<t?"loop":""},this._setup_html5=function(e){var t,e=L(u._iO,e),n=Be?we:u._a,o=decodeURI(e.url);if(Be?o===decodeURI(ue)&&(t=!0):o===decodeURI(r)&&(t=!0),n){if(n._s)if(Be)n._s&&n._s.playState&&!t&&n._s.stop();else if(!Be&&o===decodeURI(r))return u._apply_loop(n,e.loops),n;t||(i(!1),n.src=e.url,u.url=e.url,r=e.url,ue=e.url,n._called_load=!1)}else e.autoLoad||e.autoPlay?u._a=new Audio(e.url):u._a=Ke&&opera.version()<10?new Audio(null):new Audio,(n=u._a)._called_load=!1,Be&&(we=n);return u.isHTML5=!0,(u._a=n)._s=u,c(),u._apply_loop(n,e.loops),e.autoLoad||e.autoPlay?u.load():(n.autobuffer=!1,n.preload="auto"),n},c=function(){if(u._a._added_events)return!1;var e,t,n,o;for(e in u._a._added_events=!0,he)he.hasOwnProperty(e)&&(n=he[t=e],o=void 0,u._a&&u._a.addEventListener(t,n,o||!1));return!0},t=function(){var e,t,n,o;for(e in b._wD(u.id+": Removing event listeners"),u._a._added_events=!1,he)he.hasOwnProperty(e)&&(n=he[t=e],o=void 0,u._a&&u._a.removeEventListener(t,n,o||!1))},this._onload=function(e){var t=!!e||!u.isHTML5&&8===g&&u.duration,e=u.id+": ";return b._wD(e+(t?"onload()":"Failed to load / invalid sound?"+(u.duration?" -":" Zero-length duration reported.")+" ("+u.url+")"),t?1:2),t||u.isHTML5||(!0===b.sandbox.noRemote&&b._wD(e+w("noNet"),1),!0===b.sandbox.noLocal&&b._wD(e+w("noLocal"),1)),u.loaded=t,u.readyState=t?3:2,u._onbufferchange(0),u._iO.onload&&_e(u,function(){u._iO.onload.apply(u,[t])}),!0},this._onbufferchange=function(e){return 0!==u.playState&&(!(e&&u.isBuffering||!e&&!u.isBuffering)&&(u.isBuffering=1===e,u._iO.onbufferchange&&(b._wD(u.id+": Buffer state change: "+e),u._iO.onbufferchange.apply(u)),!0))},this._onsuspend=function(){return u._iO.onsuspend&&(b._wD(u.id+": Playback suspended"),u._iO.onsuspend.apply(u)),!0},this._onfailure=function(e,t,n){u.failures++,b._wD(u.id+": Failures = "+u.failures),u._iO.onfailure&&1===u.failures?u._iO.onfailure(u,e,t,n):b._wD(u.id+": Ignoring failure")},this._onfinish=function(){var e=u._iO.onfinish;u._onbufferchange(0),u._resetOnPosition(0),u.instanceCount&&(u.instanceCount--,u.instanceCount||(p(),u.playState=0,u.paused=!1,u.instanceCount=0,u.instanceOptions={},u._iO={},o(),u.isHTML5&&(u.position=0)),u.instanceCount&&!u._iO.multiShotEvents||e&&(b._wD(u.id+": onfinish()"),_e(u,function(){e.apply(u)})))},this._whileloading=function(e,t,n,o){var i=u._iO;u.bytesLoaded=e,u.bytesTotal=t,u.duration=Math.floor(n),u.bufferLength=o,u.isHTML5||i.isMovieStar?u.durationEstimate=u.duration:i.duration?u.durationEstimate=(u.duration>i.duration?u:i).duration:u.durationEstimate=parseInt(u.bytesTotal/u.bytesLoaded*u.duration,10),u.isHTML5||(u.buffered=[{start:0,end:u.duration}]),(3!==u.readyState||u.isHTML5)&&i.whileloading&&i.whileloading.apply(u)},this._whileplaying=function(e,t,n,o,i){var a=u._iO;return!isNaN(e)&&null!==e&&(u.position=Math.max(0,e),u._processOnPosition(),!u.isHTML5&&8<g&&(a.usePeakData&&t!==pt&&t&&(u.peakData={left:t.leftPeak,right:t.rightPeak}),a.useWaveformData&&n!==pt&&n&&(u.waveformData={left:n.split(","),right:o.split(",")}),a.useEQData&&i!==pt&&i&&i.leftEQ&&(e=i.leftEQ.split(","),u.eqData=e,u.eqData.left=e,i.rightEQ!==pt&&i.rightEQ&&(u.eqData.right=i.rightEQ.split(",")))),1===u.playState&&(u.isHTML5||8!==g||u.position||!u.isBuffering||u._onbufferchange(0),a.whileplaying&&a.whileplaying.apply(u)),!0)},this._oncaptiondata=function(e){b._wD(u.id+": Caption data received."),u.captiondata=e,u._iO.oncaptiondata&&u._iO.oncaptiondata.apply(u,[e])},this._onmetadata=function(e,t){b._wD(u.id+": Metadata received.");for(var n={},o=0,i=e.length;o<i;o++)n[e[o]]=t[o];u.metadata=n,u._iO.onmetadata&&u._iO.onmetadata.apply(u)},this._onid3=function(e,t){b._wD(u.id+": ID3 data received.");for(var n=[],o=0,i=e.length;o<i;o++)n[e[o]]=t[o];u.id3=L(u.id3,n),u._iO.onid3&&u._iO.onid3.apply(u)},this._onconnect=function(e){b._wD(u.id+": "+((e=1===e)?"Connected.":"Failed to connect? - "+u.url),e?1:2),(u.connected=e)&&(u.failures=0,v(u.id)&&(u.getAutoPlay()?u.play(pt,u.getAutoPlay()):u._iO.autoLoad&&u.load()),u._iO.onconnect&&u._iO.onconnect.apply(u,[e]))},this._ondataerror=function(e){0<u.playState&&(b._wD(u.id+": Data error: "+e),u._iO.ondataerror&&u._iO.ondataerror.apply(u))},this._debug()},C=function(){return m.body||m._docElement||m.getElementsByTagName("div")[0]},_=function(e){return m.getElementById(e)},L=function(e,t){var n,o=e||{},i=t===pt?b.defaultOptions:t;for(n in i)i.hasOwnProperty(n)&&o[n]===pt&&("object"!==mt(i[n])||null===i[n]?o[n]=i[n]:o[n]=L(o[n],i[n]));return o},_e=function(e,t){e.isHTML5||8!==g?t():window.setTimeout(t,0)},f={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1},d=function(e,t){var n,o=!0,i=t!==pt,a=b.setupOptions,s=f;if(e===pt){for(n in o=[],a)a.hasOwnProperty(n)&&o.push(n);for(n in s)s.hasOwnProperty(n)&&("object"===mt(b[n])?o.push(n+": {...}"):b[n]instanceof Function?o.push(n+": function() {...}"):o.push(n));return b._wD(w("setup",o.join(", "))),!1}for(n in e)if(e.hasOwnProperty(n))if("object"!==mt(e[n])||null===e[n]||e[n]instanceof Array||e[n]instanceof RegExp)i&&s[t]!==pt?b[t][n]=e[n]:a[n]!==pt?(b.setupOptions[n]=e[n],b[n]=e[n]):s[n]===pt?(X(w(b[n]===pt?"setupUndef":"setupError",n),2),o=!1):b[n]instanceof Function?b[n].apply(b,e[n]instanceof Array?e[n]:[e[n]]):b[n]=e[n];else{if(s[n]!==pt)return d(e[n],n);X(w(b[n]===pt?"setupUndef":"setupError",n),2),o=!1}return o},ge=window.attachEvent,ye={add:ge?"attachEvent":"addEventListener",remove:ge?"detachEvent":"removeEventListener"},le={add:function(){ct(ft(arguments),"add")},remove:function(){ct(ft(arguments),"remove")}},he={abort:ht(function(){b._wD(this._s.id+": abort")}),canplay:ht(function(){var t,n=this._s;if(n._html5_canplay)return!0;if(n._html5_canplay=!0,b._wD(n.id+": canplay"),n._onbufferchange(0),t=n._iO.position===pt||isNaN(n._iO.position)?null:n._iO.position/ot,n.position&&this.currentTime!==t){b._wD(n.id+": canplay: Setting position to "+t);try{this.currentTime=t}catch(e){b._wD(n.id+": canplay: Setting position of "+t+" failed: "+e.message,2)}}n._iO._oncanplay&&n._iO._oncanplay()}),canplaythrough:ht(function(){var e=this._s;e.loaded||(e._onbufferchange(0),e._whileloading(e.bytesLoaded,e.bytesTotal,e._get_html5_duration()),e._onload(!0))}),ended:ht(function(){var e=this._s;b._wD(e.id+": ended"),e._onfinish()}),error:ht(function(){b._wD(this._s.id+": HTML5 error, code "+this.error.code),this._s._onload(!1)}),loadeddata:ht(function(){var e=this._s;b._wD(e.id+": loadeddata"),e._loaded||Je||(e.duration=e._get_html5_duration())}),loadedmetadata:ht(function(){b._wD(this._s.id+": loadedmetadata")}),loadstart:ht(function(){b._wD(this._s.id+": loadstart"),this._s._onbufferchange(1)}),play:ht(function(){this._s._onbufferchange(0)}),playing:ht(function(){b._wD(this._s.id+": playing"),this._s._onbufferchange(0)}),progress:ht(function(e){var t,n,o,i,a=this._s,s="progress"===e.type,r=e.target.buffered,l=e.loaded||0,u=e.total||1;if(a.buffered=[],r&&r.length){for(t=0,n=r.length;t<n;t++)a.buffered.push({start:r.start(t)*ot,end:r.end(t)*ot});if(i=(r.end(0)-r.start(0))*ot,l=Math.min(1,i/(e.target.duration*ot)),s&&1<r.length){for(o=[],n=r.length,t=0;t<n;t++)o.push(e.target.buffered.start(t)*ot+"-"+e.target.buffered.end(t)*ot);b._wD(this._s.id+": progress, timeRanges: "+o.join(", "))}s&&!isNaN(l)&&b._wD(this._s.id+": progress, "+Math.floor(100*l)+"% loaded")}isNaN(l)||(a._onbufferchange(0),a._whileloading(l,u,a._get_html5_duration()),l&&u&&l===u&&he.canplaythrough.call(this,e))}),ratechange:ht(function(){b._wD(this._s.id+": ratechange")}),suspend:ht(function(e){var t=this._s;b._wD(this._s.id+": suspend"),he.progress.call(this,e),t._onsuspend()}),stalled:ht(function(){b._wD(this._s.id+": stalled")}),timeupdate:ht(function(){this._s._onTimer()}),waiting:ht(function(){var e=this._s;b._wD(this._s.id+": waiting"),e._onbufferchange(1)})},ne=function(e){e=!(!e||!(e.type||e.url||e.serverURL))&&(!(e.serverURL||e.type&&dt(e.type))&&(e.type?oe({type:e.type}):oe({url:e.url})||b.html5Only||e.url.match(/data\:/i)));return e},ae=function(e){var t;return e&&(t=(!Je||qe)&&Xe?it:null,e.removeAttribute("src"),void 0!==e._called_unload&&(e._called_load=!1)),Be&&(ue=null),t},oe=function(e){if(!b.useHTML5Audio||!b.hasHTML5)return!1;var t,n,o,i=e.url||null,e=e.type||null,a=b.audioFormats;if(e&&b.html5[e]!==pt)return b.html5[e]&&!dt(e);if(!ie){for(o in ie=[],a)a.hasOwnProperty(o)&&(ie.push(o),a[o].related&&(ie=ie.concat(a[o].related)));ie=new RegExp("\\.("+ie.join("|")+")(\\?.*)?$","i")}return(i=i?i.toLowerCase().match(ie):null)&&i.length?i=i[1]:e?i=(-1!==(n=e.indexOf(";"))?e.substr(0,n):e).substr(6):t=!1,t=i&&b.html5[i]!==pt?b.html5[i]&&!dt(i):(t=b.html5.canPlayType({type:e="audio/"+i}),(b.html5[i]=t)&&b.html5[e]&&!dt(e))},re=function(){if(!b.useHTML5Audio||!b.hasHTML5)return b.html5.usingFlash=!0,!(Ue=!0);var e,t,n,o,s=Audio!==pt?Ke&&opera.version()<10?new Audio(null):new Audio:null,i={};function a(e){var t,n,o,i=!1,a=!1;if(!s||"function"!=typeof s.canPlayType)return i;if(e instanceof Array){for(n=0,o=e.length;n<o;n++)(b.html5[e[n]]||s.canPlayType(e[n]).match(b.html5Test))&&(b.html5[e[n]]=a=!0,b.flash[e[n]]=!!e[n].match(nt));i=a}else i=!(!(t=!(!s||"function"!=typeof s.canPlayType)&&s.canPlayType(e))||!t.match(b.html5Test));return i}for(e in n=b.audioFormats)if(n.hasOwnProperty(e)&&(t="audio/"+e,i[e]=a(n[e].type),i[t]=i[e],e.match(nt)?(b.flash[e]=!0,b.flash[t]=!0):(b.flash[e]=!1,b.flash[t]=!1),n[e]&&n[e].related))for(o=n[e].related.length-1;0<=o;o--)i["audio/"+n[e].related[o]]=i[e],b.html5[n[e].related[o]]=i[e],b.flash[n[e].related[o]]=i[e];return i.canPlayType=s?a:null,b.html5=L(b.html5,i),b.html5.usingFlash=te(),Ue=b.html5.usingFlash,!0},F={notReady:"Unavailable - wait until onready() has fired.",notOK:"Audio support is not available.",domError:r+"exception caught while appending SWF to DOM.",spcWmode:"Removing wmode, preventing known SWF loading issue(s)",swf404:o+"Verify that %s is a valid path.",tryDebug:"Try "+r+".debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:o+"Non-HTTP page ("+m.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:o+"Special case: Waiting for SWF to load with window focus...",waitForever:o+"Waiting indefinitely for Flash (will recover if unblocked)...",waitSWF:o+"Waiting for 100% SWF load...",needFunction:o+"Function object expected for %s",badID:'Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:o+"_debug(): Current sound objects",waitOnload:o+"Waiting for window.onload()",docLoaded:o+"Document already loaded",onload:o+"initComplete(): calling soundManager.onload()",onloadOK:r+".onload() complete",didInit:o+"init(): Already called?",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:o+"Failed to remove Flash node.",shutdown:r+".disable(): Shutting down",queue:o+"Queueing %s handler",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+Q.swfTimedout+" CSS...",fbLoaded:"Flash loaded",fbHandler:o+"flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:r+".load(): current URL already assigned.",badFV:r+'.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",needFlash:o+"Fatal error: Flash is needed to play some required formats, but is not available.",gotFocus:o+"Got window focus.",policy:"Enabling usePolicyFile for data access",setup:r+".setup(): allowed parameters: %s",setupError:r+'.setup(): "%s" cannot be assigned with this method.',setupUndef:r+'.setup(): Could not find option "%s"',setupLate:r+".setup(): url, flashVersion and html5Test property changes will not take effect until reboot().",noURL:o+"Flash URL required. Call soundManager.setup({url:...}) to get started.",sm2Loaded:"SoundManager 2: Ready.",reset:r+".reset(): Removing event callbacks",mobileUA:"Mobile UA detected, preferring HTML5 by default.",globalHTML5:"Using singleton HTML5 Audio() pattern for this device."},w=function(){var e,t,n,o=je.call(arguments),i=o.shift();if((e=F&&F[i]?F[i]:"")&&o&&o.length)for(t=0,n=o.length;t<n;t++)e=e.replace("%s",o[t]);return e},J=function(e){return 8===g&&1<e.loops&&e.stream&&(y("as2loop"),e.stream=!1),e},K=function(e,t){return e&&!e.usePolicyFile&&(e.onid3||e.usePeakData||e.useWaveformData||e.useEQData)&&(b._wD((t||"")+w("policy")),e.usePolicyFile=!0),e},X=function(e){Ze&&console.warn!==pt?console.warn(e):b._wD(e)},n=function(){return!1},j=function(e){for(var t in e)e.hasOwnProperty(t)&&"function"==typeof e[t]&&(e[t]=n)},B=function(e){e===pt&&(e=!1),(Pe||e)&&b.disable(e)},W=function(e){if(e)if(e.match(/\.swf(\?.*)?$/i)){if(e.substr(e.toLowerCase().lastIndexOf(".swf?")+4))return e}else e.lastIndexOf("/")!==e.length-1&&(e+="/");return e=(e&&-1!==e.lastIndexOf("/")?e.substr(0,e.lastIndexOf("/")+1):"./")+b.movieURL,b.noSWFCache&&(e+="?ts="+(new Date).getTime()),e},P=function(){8!==(g=parseInt(b.flashVersion,10))&&9!==g&&(b._wD(w("badFV",g,He)),b.flashVersion=g=He);var e=b.debugMode||b.debugFlash?"_debug.swf":".swf";b.useHTML5Audio&&!b.html5Only&&b.audioFormats.mp4.required&&g<9&&(b._wD(w("needfl9")),b.flashVersion=g=9),b.version=b.versionNumber+(b.html5Only?" (HTML5-only mode)":9===g?" (AS3/Flash 9)":" (AS2/Flash 8)"),8<g?(b.defaultOptions=L(b.defaultOptions,b.flash9Options),b.features.buffering=!0,b.defaultOptions=L(b.defaultOptions,b.movieStarOptions),b.filePatterns.flash9=new RegExp("\\.(mp3|"+lt.join("|")+")(\\?.*)?$","i"),b.features.movieStar=!0):b.features.movieStar=!1,b.filePattern=b.filePatterns[8!==g?"flash9":"flash8"],b.movieURL=(8===g?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",e),b.features.peakData=b.features.waveformData=b.features.eqData=8<g},N=function(e,t){if(!O)return!1;O._setPolling(e,t)},U=function(){if(b.debugURLParam.test(Oe)&&(b.debugMode=!0),_(b.debugID))return!1;var e,t,n,o,i;if(b.debugMode&&!_(b.debugID)&&(!Ze||!b.useConsole||!b.consoleOnly)){for(i in(e=m.createElement("div")).id=b.debugID+"-toggle",o={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001},e.appendChild(m.createTextNode("-")),e.onclick=$,e.title="Toggle SM2 debug console",be.match(/msie 6/i)&&(e.style.position="absolute",e.style.cursor="hand"),o)o.hasOwnProperty(i)&&(e.style[i]=o[i]);if((t=m.createElement("div")).id=b.debugID,t.style.display=b.debugMode?"block":"none",b.debugMode&&!_(e.id)){try{(n=C()).appendChild(e)}catch(e){throw new Error(w("domError")+" \n"+e.toString())}n.appendChild(t)}}},v=this.getSoundById,y=function(e,t){return e?b._wD(w(e),t):""},$=function(){var e=_(b.debugID),t=_(b.debugID+"-toggle");if(!e)return!1;Me?(t.innerHTML="+",e.style.display="none"):(t.innerHTML="-",e.style.display="block"),Me=!Me},M=function(e,t,n){if(window.sm2Debugger!==pt)try{sm2Debugger.handleEvent(e,t,n)}catch(e){return!1}return!0},V=function(){var e=[];return b.debugMode&&e.push(Q.sm2Debug),b.debugFlash&&e.push(Q.flashDebug),b.useHighPerformance&&e.push(Q.highPerf),e.join(" ")},q=function(){var e=w("fbHandler"),t=b.getMoviePercent(),n=Q,o={type:"FLASHBLOCK"};if(b.html5Only)return!1;b.ok()?(b.didFlashBlock&&b._wD(e+": Unblocked"),b.oMC&&(b.oMC.className=[V(),n.swfDefault,n.swfLoaded+(b.didFlashBlock?" "+n.swfUnblocked:"")].join(" "))):(Ue&&(b.oMC.className=V()+" "+n.swfDefault+" "+(null===t?n.swfTimedout:n.swfError),b._wD(e+": "+w("fbTimeout")+(t?" ("+w("fbLoaded")+")":""))),b.didFlashBlock=!0,c({type:"ontimeout",ignoreInit:!0,error:o}),R(o))},s=function(e,t,n){De[e]===pt&&(De[e]=[]),De[e].push({method:t,scope:n||null,fired:!1})},c=function(e){if(e=e||{type:b.ok()?"onready":"ontimeout"},!l&&e&&!e.ignoreInit)return!1;if("ontimeout"===e.type&&(b.ok()||Pe&&!e.ignoreInit))return!1;var t,n,o={success:e&&e.ignoreInit?b.ok():!Pe},i=e&&e.type&&De[e.type]||[],a=[],s=[o],r=Ue&&!b.ok();for(e.error&&(s[0].error=e.error),t=0,n=i.length;t<n;t++)!0!==i[t].fired&&a.push(i[t]);if(a.length)for(t=0,n=a.length;t<n;t++)a[t].scope?a[t].method.apply(a[t].scope,s):a[t].method.apply(this,s),r||(a[t].fired=!0);return!0},h=function(){window.setTimeout(function(){b.useFlashBlock&&q(),c(),"function"==typeof b.onload&&(y("onload",1),b.onload.apply(window),y("onloadOK",1)),b.waitForWindowLoad&&le.add(window,"load",h)},1)},fe=function(){if(de!==pt)return de;var t,e=!1,n=navigator,o=n.plugins,i=window.ActiveXObject;if(o&&o.length)o="application/x-shockwave-flash",(n=n.mimeTypes)&&n[o]&&n[o].enabledPlugin&&n[o].enabledPlugin.description&&(e=!0);else if(i!==pt&&!be.match(/MSAppHost/i)){try{t=new i("ShockwaveFlash.ShockwaveFlash")}catch(e){t=null}e=!!t,t=null}return de=e},te=function(){var e,t,n=b.audioFormats;if(qe&&!!be.match(/os (1|2|3_0|3_1)/i)?(b.hasHTML5=!1,b.html5Only=!0,b.oMC&&(b.oMC.style.display="none")):b.useHTML5Audio&&(b.html5&&b.html5.canPlayType||(b._wD("SoundManager: No HTML5 Audio() support detected."),b.hasHTML5=!1),Ge&&b._wD(o+"Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(de?"will use flash fallback for MP3/MP4, if available":" would use flash fallback for MP3/MP4, but none detected."),1)),b.useHTML5Audio&&b.hasHTML5)for(t in ee=!0,n)n.hasOwnProperty(t)&&n[t].required&&(b.html5.canPlayType(n[t].type)?b.preferFlash&&(b.flash[t]||b.flash[n[t].type])&&(e=!0):e=!(ee=!1));return b.ignoreFlash&&(ee=!(e=!1)),b.html5Only=b.hasHTML5&&b.useHTML5Audio&&!e,!b.html5Only},Y=function(e){var t,n,o,i=0;if(e instanceof Array){for(t=0,n=e.length;t<n;t++)if(e[t]instanceof Object){if(b.canPlayMIME(e[t].type)){i=t;break}}else if(b.canPlayURL(e[t])){i=t;break}e[i].url&&(e[i]=e[i].url),o=e[i]}else o=e;return o},z=function(e){e._hasTimer||(e._hasTimer=!0,!ze&&b.html5PollingInterval&&(null===Re&&0===xe&&(Re=setInterval(Z,b.html5PollingInterval)),xe++))},G=function(e){e._hasTimer&&(e._hasTimer=!1,!ze&&b.html5PollingInterval&&xe--)},Z=function(){var e;if(null!==Re&&!xe)return clearInterval(Re),Re=null,!1;for(e=b.soundIDs.length-1;0<=e;e--)b.sounds[b.soundIDs[e]].isHTML5&&b.sounds[b.soundIDs[e]]._hasTimer&&b.sounds[b.soundIDs[e]]._onTimer()},R=function(e){e=e!==pt?e:{},"function"==typeof b.onerror&&b.onerror.apply(window,[{type:e.type!==pt?e.type:null}]),e.fatal!==pt&&e.fatal&&b.disable()},ce=function(){if(!Ge||!fe())return!1;var e,t,n=b.audioFormats;for(t in n)if(n.hasOwnProperty(t)&&("mp3"===t||"mp4"===t)&&(b._wD(r+": Using flash fallback for "+t+" format"),b.html5[t]=!1,n[t]&&n[t].related))for(e=n[t].related.length-1;0<=e;e--)b.html5[n[t].related[e]]=!1},this._setSandboxType=function(e){var t=b.sandbox;t.type=e,t.description=t.types[t.types[e]!==pt?e:"unknown"],"localWithFile"===t.type?(t.noRemote=!0,t.noLocal=!1,y("secNote",2)):"localWithNetwork"===t.type?(t.noRemote=!1,t.noLocal=!0):"localTrusted"===t.type&&(t.noRemote=!1,t.noLocal=!1)},this._externalInterfaceOK=function(e){return!b.swfLoaded&&(M("swf",!0),M("flashtojs",!0),b.swfLoaded=!0,et=!1,Ge&&ce(),e&&e.replace(/\+dev/i,"")===b.versionNumber.replace(/\+dev/i,"")?void setTimeout(D,Qe?100:1):(t=r+': Fatal: JavaScript file build "'+b.versionNumber+'" does not match Flash SWF build "'+e+'" at '+b.url+". Ensure both are up-to-date.",setTimeout(function(){throw new Error(t)},0),!1));var t},x=function(e,t){if(Le&&Te)return!1;function d(){var e=[],t=[],n="SoundManager "+b.version+(!b.html5Only&&b.useHTML5Audio?b.hasHTML5?" + HTML5 audio":", no HTML5 audio support":"");b.html5Only?b.html5PollingInterval&&e.push("html5PollingInterval ("+b.html5PollingInterval+"ms)"):(b.preferFlash&&e.push("preferFlash"),b.useHighPerformance&&e.push("useHighPerformance"),b.flashPollingInterval&&e.push("flashPollingInterval ("+b.flashPollingInterval+"ms)"),b.html5PollingInterval&&e.push("html5PollingInterval ("+b.html5PollingInterval+"ms)"),b.wmode&&e.push("wmode ("+b.wmode+")"),b.debugFlash&&e.push("debugFlash"),b.useFlashBlock&&e.push("flashBlock")),e.length&&(t=t.concat([e.join(" + ")])),b._wD(n+(t.length?" + "+t.join(", "):""),1),pe()}if(b.html5Only)return P(),d(),b.oMC=_(b.movieID),D(),!(Te=Le=!0);var n,o,i,f,a,s,c,r=t||b.url,h=b.altURL||r,p=C(),l=(V(),m.getElementsByTagName("html")[0]);function u(e,t){return'<param name="'+e+'" value="'+t+'" />'}if(l=l&&l.dir&&l.dir.match(/rtl/i),e=e===pt?b.id:e,P(),b.url=W(at?r:h),t=b.url,b.wmode=!b.wmode&&b.useHighPerformance?"transparent":b.wmode,null!==b.wmode&&(be.match(/msie 8/i)||!Qe&&!b.useHighPerformance)&&navigator.platform.match(/win32|win64/i)&&(Ne.push(F.spcWmode),b.wmode=null),n={name:e,id:e,src:t,quality:"high",allowScriptAccess:b.allowScriptAccess,bgcolor:b.bgColor,pluginspage:st+"www.macromedia.com/go/getflashplayer",title:"JS/Flash audio component (SoundManager 2)",type:"application/x-shockwave-flash",wmode:b.wmode,hasPriority:"true"},b.debugFlash&&(n.FlashVars="debug=1"),b.wmode||delete n.wmode,Qe)o=m.createElement("div"),f=['<object id="'+e+'" data="'+t+'" type="'+n.type+'" title="'+n.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+st+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',u("movie",t),u("AllowScriptAccess",b.allowScriptAccess),u("quality",n.quality),b.wmode?u("wmode",b.wmode):"",u("bgcolor",b.bgColor),u("hasPriority","true"),b.debugFlash?u("FlashVars",n.FlashVars):"","</object>"].join("");else for(i in o=m.createElement("embed"),n)n.hasOwnProperty(i)&&o.setAttribute(i,n[i]);if(U(),r=V(),p=C())if(b.oMC=_(b.movieID)||m.createElement("div"),b.oMC.id)h=b.oMC.className,b.oMC.className=(h?h+" ":Q.swfDefault)+(r?" "+r:""),b.oMC.appendChild(o),Qe&&((a=b.oMC.appendChild(m.createElement("div"))).className=Q.swfBox,a.innerHTML=f),Te=!0;else{if(b.oMC.id=b.movieID,b.oMC.className=Q.swfDefault+" "+r,a=s=null,b.useFlashBlock||(b.useHighPerformance?s={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}:(s={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"},l&&(s.left=Math.abs(parseInt(s.left,10))+"px"))),$e&&(b.oMC.style.zIndex=1e4),!b.debugFlash)for(c in s)s.hasOwnProperty(c)&&(b.oMC.style[c]=s[c]);try{Qe||b.oMC.appendChild(o),p.appendChild(b.oMC),Qe&&((a=b.oMC.appendChild(m.createElement("div"))).className=Q.swfBox,a.innerHTML=f),Te=!0}catch(e){throw new Error(w("domError")+" \n"+e.toString())}}return Le=!0,d(),!0},I=function(){return b.html5Only?(x(),!1):!O&&(b.url?((O=b.getMovie(b.id))||(Ee?(Qe?b.oMC.innerHTML=Ae:b.oMC.appendChild(Ee),Le=!(Ee=null)):x(b.id,b.url),O=b.getMovie(b.id)),"function"==typeof b.oninitmovie&&setTimeout(b.oninitmovie,1),me(),!0):(y("noURL"),!1))},p=function(){setTimeout(T,1e3)},T=function(){var e,t=!1;return!!b.url&&(!ke&&(ke=!0,le.remove(window,"load",p),et&&!Ye?(y("waitFocus"),!1):(l||0<(e=b.getMoviePercent())&&e<100&&(t=!0),void setTimeout(function(){if(e=b.getMoviePercent(),t)return ke=!1,b._wD(w("waitSWF")),window.setTimeout(p,1),!1;l||(b._wD(r+": No Flash response within expected time. Likely causes: "+(0===e?"SWF load failed, ":"")+"Flash blocked or JS-Flash security error."+(b.debugFlash?" "+w("checkSWF"):""),2),!at&&e&&(y("localFail",2),b.debugFlash||y("tryDebug",2)),0===e&&b._wD(w("swf404",b.url),1),M("flashtojs",!1," (Check flash security or flash blockers)")),!l&&tt&&(null===e?b.useFlashBlock||0===b.flashLoadTimeout?(b.useFlashBlock&&q(),y("waitForever")):!b.useFlashBlock&&ee?window.setTimeout(function(){X(o+"useFlashBlock is false, 100% HTML5 mode is possible. Rebooting with preferFlash: false..."),b.setup({preferFlash:!1}).reboot(),b.didFlashBlock=!0,b.beginDelayedInit()},1):(y("waitForever"),c({type:"ontimeout",ignoreInit:!0})):0===b.flashLoadTimeout?y("waitForever"):B(!0))},b.flashLoadTimeout))))},S=function(){function e(){le.remove(window,"focus",S)}return Ye||!et||(Ye=tt=!0,y("gotFocus"),ke=!1,p()),e(),!0},me=function(){Ne.length&&(b._wD("SoundManager 2: "+Ne.join(" "),1),Ne=[])},pe=function(){me();var e,t=[];if(b.useHTML5Audio&&b.hasHTML5){for(e in b.audioFormats)b.audioFormats.hasOwnProperty(e)&&t.push(e+" = "+b.html5[e]+(!b.html5[e]&&Ue&&b.flash[e]?" (using flash)":b.preferFlash&&b.flash[e]&&Ue?" (preferring flash)":b.html5[e]?"":" ("+(b.audioFormats[e].required?"required, ":"")+"and no flash support)"));b._wD("SoundManager 2 HTML5 support: "+t.join(", "),1)}},a=function(e){if(l)return!1;if(b.html5Only)return y("sm2Loaded"),l=!0,h(),M("onload",!0),!0;var t,n=!0;return b.useFlashBlock&&b.flashLoadTimeout&&!b.getMoviePercent()||(l=!0,Pe&&(t={type:!de&&Ue?"NO_FLASH":"INIT_TIMEOUT"})),b._wD("SoundManager 2 "+(Pe?"failed to load":"loaded")+" ("+(Pe?"Flash security/load error":"OK")+")",Pe?2:1),Pe||e?(b.useFlashBlock&&b.oMC&&(b.oMC.className=V()+" "+(null===b.getMoviePercent()?Q.swfTimedout:Q.swfError)),c({type:"ontimeout",error:t,ignoreInit:!0}),M("onload",!1),R(t),n=!1):M("onload",!0),Pe||(b.waitForWindowLoad&&!Se?(y("waitOnload"),le.add(window,"load",h)):(b.waitForWindowLoad&&Se&&y("docLoaded"),h())),n},i=function(){var e,t=b.setupOptions;for(e in t)t.hasOwnProperty(e)&&(b[e]===pt?b[e]=t[e]:b[e]!==t[e]&&(b.setupOptions[e]=b[e]))},D=function(){if(l)return y("didInit"),!1;function e(){le.remove(window,"load",b.beginDelayedInit)}if(b.html5Only)return l||(e(),b.enabled=!0,a()),!0;I();try{O._externalInterfaceTest(!1),N(!0,b.flashPollingInterval||(b.useHighPerformance?10:50)),b.debugMode||O._disableDebug(),b.enabled=!0,M("jstoflash",!0),b.html5Only||le.add(window,"unload",n)}catch(e){return b._wD("js/flash exception: "+e.toString()),M("jstoflash",!1),R({type:"JS_TO_FLASH_EXCEPTION",fatal:!0}),B(!0),a(),!1}return a(),e(),!0},E=function(){return!k&&(k=!0,i(),U(),e="sm2-usehtml5audio=",t="sm2-preferflash=",-1!==(n=Oe.toLowerCase()).indexOf(e)&&(e="1"===n.charAt(n.indexOf(e)+e.length),b.setup({useHTML5Audio:e})),-1!==n.indexOf(t)&&(e="1"===n.charAt(n.indexOf(t)+t.length),b.setup({preferFlash:e})),!de&&b.hasHTML5&&(b._wD("SoundManager: No Flash detected"+(b.useHTML5Audio?". Trying HTML5-only mode.":", enabling HTML5."),1),b.setup({useHTML5Audio:!0,preferFlash:!1})),re(),!de&&Ue&&(Ne.push(F.needFlash),b.setup({flashLoadTimeout:1})),m.removeEventListener&&m.removeEventListener("DOMContentLoaded",E,!1),I(),!0);var e,t,n},se=function(){return"complete"===m.readyState&&(E(),m.detachEvent("onreadystatechange",se)),!0},A=function(){Se=!0,le.remove(window,"load",A)},(H=function(){ze&&(b.setupOptions.useHTML5Audio&&!b.setupOptions.preferFlash||Ne.push(F.mobileUA),b.setupOptions.useHTML5Audio=!0,b.setupOptions.preferFlash=!1,(qe||Ve&&!be.match(/android\s2\.3/i))&&(Ne.push(F.globalHTML5),qe&&(b.ignoreFlash=!0),Be=!0))})(),fe(),le.add(window,"focus",S),le.add(window,"load",p),le.add(window,"load",A),m.addEventListener?m.addEventListener("DOMContentLoaded",E,!1):m.attachEvent?m.attachEvent("onreadystatechange",se):(M("onload",!1),R({type:"NO_DOM2_EVENTS",fatal:!0}))}return void 0!==window.SM2_DEFER&&SM2_DEFER||(e=new t),window.soundManager=e}.call(t,n,t,e))||(e.exports=n)}}]);